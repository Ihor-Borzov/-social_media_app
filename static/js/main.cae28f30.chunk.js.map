{"version":3,"sources":["Components/Nav-bar/Nav_bar.module.css","Components/common/preloader/Preloader.jsx","assets/images/user.jpg","Redux/dialogs-reducer.ts","api/api.js","Components/Nav-bar/Friend/Friend.jsx","Redux/Auth.ts","Redux/header-reducer.ts","assets/images/Profile.png","Components/Nav-bar/Nav_bar.jsx","Components/Settings/Settings.jsx","Components/Header/Header.jsx","Components/Header/HeaderContainer.js","Components/Login/Login.jsx","Redux/user-selector.js","Redux/users-reducer.ts","Components/Users/UserSearchTab.jsx","Components/Users/Paginator.jsx","Components/Users/User.jsx","Components/Users/Users.jsx","Components/Users/UsersContainer.js","Redux/app-reduces.ts","Redux/sidebar-reducer.ts","Redux/redux-store.js","App.js","reportWebVitals.js","index.js","Components/Login/Login.module.css","Components/common/FormControls/FormControls.js","Utilities/FormValidators/validators.js","Redux/profile-reducer.ts","assets/images/loader.gif","Components/Nav-bar/Friend/Friend.module.css","Components/Header/Header.module.css","Components/common/FormControls/FormControls.module.css","Components/Users/Users.module.css"],"names":["module","exports","Preloader","props","className","s","imgWrap","src","preloadGif","alt","SEND_USER_MESSAGE","initialState","dialogsData","id","name","messagesData","message","userInputMessage","SendMessageThunk","data","dispatch","type","sendUserMessageCreator","reset","dialogsReducer","state","action","instance","axios","create","baseURL","withCredentials","headers","usersAPI","getUsers","currentPage","pageSize","isFriend","userName","get","then","response","follow","userId","post","resultCode","unfollow","delete","profileAPI","getUserProfile","getStatus","setStatus","status","put","savePhoto","photo","formData","FormData","append","saveProfile","profileData","authenticationAPI","authenticate","login","getCaptchaUrl","logout","Friend","friend","circle","picture","friends_name","SET_USERS_DATA","GET_CAPTCHA_URL_SUCCESS","email","password","rememberMe","isAuth","captchaUrl","authorizationAC","getCaptchaUrlSuccess","payload","a","url","logoutThunk","authReducer","OPEN_CLOSE_HAMBURGER_MENU","CLOSE_HAMBURGER_MENU","hamburgerMenu","headerReducer","connect","navBarPage","authorizedId","auth","onOffBurgerMenu","header","closeHamburgerMenuAC","displayFriends","friendData","map","friendsObject","nav_bar","noBar","item","to","onClick","navData","isActive","activeLink","notActiveLink","another","logOut","logIn","MyFriends","BestFriends","friends","ihorBorzovPicture","Settings","content","Header","header__burger_active","header__burger","openCloseHamburgerMenuAC","HeaderContainer","componentDidMount","render","React","Component","Login","componentDidUpdate","onSubmit","loginThunk","LoginReduxForm","maximumChar","maxChar","reduxForm","form","handleSubmit","loginForm","wrapper","Field","placeholder","component","Input","validate","required","error","commonError","buttonsWrapper","loginButton","createField","LoginConnect","console","log","stopSubmit","_error","messages","getUsersSuperReselector","createSelector","usersPage","users","getPageSize","getUsersCount","totalUsersCount","getCurrentPage","getIsFetching","isFetching","getFollow_unfollowUserIds","following_unfollowingIds","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USER_COUNT","SET_TERM","SET_IS_FRIEND","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","portionSize","term","setUsers","setTotalUsersCount","newTotalUsersCount","toggleIsFetching","toggleIsFollowingProgress","check","usersReducer","u","followed","page","filter","ids","UserSearchTab","style","searchTab","top","value","e","stopPropagation","onChange","setTermAC","currentTarget","searchIsFriend","hideOpenSearchTab","setIsFriendAC","defaultChecked","Paginator","setCurrentPage","useState","paginatorDiv","useRef","totalPagesCount","Math","ceil","totalPortionsCount","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","pagesArray","i","push","paginator","ref","pageNumbers","buttonPrev","activePage","notActivePage","buttonNext","userSearchButton","User","user","ussers_container","usser_icon","wrapper__for_AspectRatio","imgAspectRatio_wrapper","img_wrapper","photos","large","userThumbnail","button_wrapper","disabled","some","user_info","name_and_status","country_and_city","country","city","Users","UsersContainerComponent","this","prevProps","prevState","snapshot","dataResponse","items","totalCount","followSuccess","unfollowSuccess","INITIALIZED_SUCCESS","initialized","appReducer","sidebarReducer","reducers","combineReducers","dialogsPage","myPostsPage","profileReducer","fromReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store","ProfileContainer","lazy","DialogsContainer","App","catchAllUnhandledErrors","reason","promise","showGlobalError","initializeApp","addEventListener","componentWillUnmount","removeEventListener","basename","process","path","element","Suspense","fallback","exact","UsersContainer","ConnectAppContainer","BaseAppComponent","StrictMode","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById","input","otherProps","FormControl","TextArea","meta","children","touched","formControle","validators","text","max","length","ADD_NEW_POST","SET_USER_PROFILE","SET_STATUS","REMOVE_POST","SAVE_PHOTO_SUCCESS","FETCHING_USER_PICTURE","SET_GLOBAL_ERROR","postsData","likes","userProfile","errorFlag","isFetchingAC","fetch","setGlobalError","addPostAndCleanReduxForm","addNewPostCreator","setTimeout","updateStatus","alert","file","getState","Promise","reject","p"],"mappings":";wFACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,MAAQ,uBAAuB,UAAY,2BAA2B,KAAO,sBAAsB,MAAQ,uBAAuB,WAAa,4BAA4B,cAAgB,+BAA+B,OAAS,wBAAwB,MAAQ,uBAAuB,QAAU,yBAAyB,YAAc,6BAA6B,OAAS,wBAAwB,OAAS,wBAAwB,aAAe,gC,iCCD9e,0CAaeC,IATC,SAACC,GAEb,OACI,qBAAKC,UAAWC,IAAEC,QAAlB,SACI,qBAAKC,IAAKC,IAAYC,IAAI,kB,iCCRvB,QAA0B,kC,8FCEnCC,EAAoB,oBAmBtBC,EAAe,CACfC,YAAa,CACT,CAAEC,GAAI,EAAGC,KAAM,UACf,CAAED,GAAI,EAAGC,KAAM,SACf,CAAED,GAAI,EAAGC,KAAM,SACf,CAAED,GAAI,EAAGC,KAAM,QACf,CAAED,GAAI,EAAGC,KAAM,QACf,CAAED,GAAI,EAAGC,KAAM,WAGnBC,aAAc,CACV,CAAEF,GAAI,EAAGG,QAAS,MAClB,CAAEH,GAAI,EAAGG,QAAS,mBAClB,CAAEH,GAAI,EAAGG,QAAS,mBAClB,CAAEH,GAAI,EAAGG,QAAS,oBAGtBC,iBAAkB,IAkCTC,EAAmB,SAACC,GAC7B,OAAO,SAACC,GACJA,EAV8B,SAACD,GACnC,MAAO,CACHE,KAAMX,EACNS,QAOSG,CAAuBH,IAChCC,EAASG,YAAM,kBAKRC,IAjCQ,WAAyE,IAAxEC,EAAuE,uDAA9Cd,EAAce,EAAgC,uCAE3F,OAAQA,EAAOL,OAENX,EACM,2BAAKe,GAAZ,IAAmBV,aAAa,GAAD,mBAAMU,EAAMV,cAAZ,CAA0B,CAAEF,GAAI,EAAGG,QAASU,EAAOP,QAAUF,iBAAkB,KAElGQ,I,4ECtDxB,mHAIME,EAJN,OAIiBC,EAAMC,OAAO,CAC1BC,QAAS,gDACTC,iBAAiB,EACjBC,QAAS,CAAE,UAAW,0CAMbC,EAAW,CAEpBC,SAAU,WAAwD,IAAvDC,EAAsD,uDAAxC,EAAGC,EAAqC,uDAA1B,EAAGC,EAAuB,uCAAbC,EAAa,uCAC7D,OACIX,EAASY,IAAT,qBAA2BJ,EAA3B,kBAAgDC,EAAhD,iCAC6B,oBAAZC,EAAyBA,EAAS,KADnD,+BAE2B,oBAAZC,EAAyBA,EAAS,GAFjD,mBAKKE,MAAK,SAACC,GACH,OACIA,EAAStB,SAM7BuB,OAAQ,SAACC,GACL,OACIhB,EAASiB,KAAT,iBAAwBD,IACnBH,MAAK,SAACC,GACH,OACIA,EAAStB,KAAK0B,eAQlCC,SAAU,SAACH,GACP,OACIhB,EAASoB,OAAT,iBAA0BJ,IACrBH,MAAK,SAACC,GACH,OACIA,EAAStB,KAAK0B,gBAazBG,EAAa,CACtBC,eAAgB,SAACN,GACb,OACIhB,EAASY,IAAT,mBAAyBI,IAAUH,MAAK,SAACC,GACrC,OACIA,EAAStB,SAMzB+B,UAAW,SAACP,GACR,OACIhB,EAASY,IAAI,kBAAoBI,IAIzCQ,UAAW,SAACC,GACR,OAAQzB,EAAS0B,IAAI,iBAAkB,CAAED,YAK7CE,UAAW,SAACC,GACR,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,QAASH,GAEjB5B,EAAS0B,IAAI,gBAAiBG,EAAU,CAAExB,QAAS,CAAE,eAAgB,0BAIjF2B,YAAa,SAACC,GACV,OAAQjC,EAAS0B,IAAI,UAAWO,KAY3BC,EAAoB,CAE7BC,aAAc,WACV,OACInC,EAASY,IAAI,YAAYC,MAAK,SAACC,GAC3B,OACIA,EAAStB,SAQzB4C,MAAO,SAAC5C,GACJ,OACIQ,EAASiB,KAAK,cAAezB,IAIrC6C,cAAe,WACX,OACIrC,EAASY,IAAI,8BAMrB0B,OAAQ,WACJ,OACItC,EAASoB,OAAO,kB,kNCrHbmB,MAVf,SAAgB/D,GAEZ,OACI,sBAAKC,UAAWC,IAAE8D,OAAlB,UACI,qBAAK/D,UAAWC,IAAE+D,OAAlB,SAA0B,qBAAK7D,IAAKJ,EAAMkE,QAAS5D,IAAI,sBACvD,sBAAML,UAAWC,IAAEiE,aAAnB,SAAkCnE,EAAMW,W,iECV9CyD,EAAiB,iBACjBC,EAA0B,+BAa5B7D,EAAe,CACfE,GAAI,KACJkD,MAAO,KACPU,MAAO,KACPC,SAAU,KACVC,YAAY,EACZC,QAAQ,EACRC,WAAY,MA4CLC,EAAkB,SAACjE,EAAgB4D,EAAmBV,EAAmBa,GACjF,MAAQ,CAAEvD,KAAMkD,EAAgBpD,KAAM,CAAEN,KAAI4D,QAAOV,QAAOa,YAQlDG,EAAuB,SAACF,GAAiD,MAAQ,CAAExD,KAAMmD,EAAyBQ,QAAS,CAAEH,gBAS3Hf,EAAe,WACxB,OACI,SAAC1C,GACG,OACIyC,IAAkBC,eAAetB,MAAK,SAACC,GACnC,GAA4B,IAAxBA,EAASI,WAAkB,CAC3B,MAA2BJ,EAAStB,KAA9BN,EAAN,EAAMA,GAAI4D,EAAV,EAAUA,MAAOV,EAAjB,EAAiBA,MACjB3C,EAAS0D,EAAgBjE,EAAI4D,EAAOV,GAAO,SAExC3C,EAAS0D,EAAgB,KAAM,KAAM,MAAM,SAiCzDd,EAAgB,WACzB,8CAAQ,WAAO5C,GAAP,iBAAA6D,EAAA,sEACiBpB,IAAkBG,gBADnC,OACAvB,EADA,OAEAoC,EAAapC,EAAStB,KAAK+D,IAC/B9D,EAAS2D,EAAqBF,IAH1B,2CAAR,uDAQSM,EAAc,WACvB,OACI,SAAC/D,GACGyC,IAAkBI,SAASzB,MAAK,SAACC,GACI,IAA7BA,EAAStB,KAAK0B,YACdzB,EAAS0C,UAadsB,EA9HK,WAAyE,IAAxE3D,EAAuE,uDAA9Cd,EAAce,EAAgC,uCACxF,OAAQA,EAAOL,MAEX,KAAKkD,EACD,OAAO,2BACA9C,GACAC,EAAOP,MAKlB,KAAKqD,EACD,OAAO,2BACA/C,GACAC,EAAOsD,SAMlB,QAAS,OAAOvD,ICjDlB4D,EAA4B,4BAC5BC,EAAuB,uBAIzB3E,EAAe,CACf4E,eAAe,GA4CJC,EAtCO,WAAiE,IAAhE/D,EAA+D,uDAA1Cd,EAAce,EAA4B,uCAElF,OAAQA,EAAOL,MACX,KAAKgE,EACD,OAAO,2BAAK5D,GAAZ,IAAmB8D,eAAgB9D,EAAM8D,gBAE7C,KAAKD,EACD,OAAO,2BAAK7D,GAAZ,IAAmB8D,eAAe,IAGtC,QAAS,OAAO9D,ICtBT,MAA0B,oCCqEzC,IAWegE,eAXO,SAAChE,GACrB,MAAO,CACLA,MAAOA,EAAMiE,WACbC,aAAclE,EAAMmE,KAAK/E,GACzB+D,OAAQnD,EAAMmE,KAAKhB,OACnBb,MAAOtC,EAAMmE,KAAK7B,MAClB8B,gBAAiBpE,EAAMqE,OAAOP,iBAKM,CAAEJ,cAAaY,qBFnCnB,WAChC,MAAO,CAAE1E,KAAMiE,EAAsBN,SAAS,KEkCnCS,EArEf,SAAiBtF,GAEf,IAAI6F,EAAiB7F,EAAMsB,MAAMwE,WAAWC,KAAI,SAACC,GAAD,OAC9C,cAAC,EAAD,CAAQ9B,QAAS8B,EAAc9B,QAAgCvD,KAAMqF,EAAcrF,MAAtCqF,EAActF,OAG7D,OACE,sBAAKT,UAAWD,EAAM0F,gBAAkBxF,IAAE+F,QAAU/F,IAAEgG,MAAtD,UAGE,qBAAKjG,UAAWC,IAAEiG,KAAlB,SAAwB,cAAC,IAAD,CAAMC,GAAI,YAAcpG,EAAMwF,aAAca,QAASrG,EAAM4F,qBACjF3F,UAAW,SAAAqG,GAAO,OAAIA,EAAQC,SAAWrG,IAAEsG,WAAatG,IAAEuG,eADpC,uBAH1B,OAME,qBAAKxG,UAAS,UAAKC,IAAEiG,KAAP,YAAejG,IAAEwG,SAA/B,SAA0C,cAAC,IAAD,CAAMN,GAAG,WAAWC,QAASrG,EAAM4F,qBAC3E3F,UAAW,SAAAqG,GAAO,OAAIA,EAAQC,SAAWrG,IAAEsG,WAAatG,IAAEuG,eADlB,wBAN5C,KASE,qBAAKxG,UAAWC,IAAEiG,KAAlB,SAAwB,cAAC,IAAD,CAAMC,GAAG,SAASC,QAASrG,EAAM4F,qBACvD3F,UAAW,SAAAqG,GAAO,OAAIA,EAAQC,SAAWrG,IAAEsG,WAAatG,IAAEuG,eADpC,qBAGxB,sBAAKxG,UAAWC,IAAEiG,KAAlB,cAAyB,cAAC,IAAD,CAAMC,GAAG,YAAYC,QAASrG,EAAM4F,qBAC3D3F,UAAW,SAAAqG,GAAO,OAAIA,EAAQC,SAAWrG,IAAEsG,WAAatG,IAAEuG,eADnC,sBAAzB,OAGA,qBAAKxG,UAAWC,IAAEiG,KAAlB,SACGnG,EAAMyE,OACL,qBAAKxE,UAAWC,IAAEyG,OAAQN,QAAS,WAAQrG,EAAMgF,cAAehF,EAAM4F,wBAAtE,SAEE,cAAC,IAAD,CAASQ,GAAI,aAAb,sBAGA,qBAAKnG,UAAWC,IAAE0G,MAAOP,QAASrG,EAAM4F,qBAAxC,SACA,cAAC,IAAD,CAASQ,GAAI,SAAb,uBAMN,sBAAKnG,UAAWC,IAAE2G,UAAlB,UACE,qBAAK5G,UAAWC,IAAE4G,YAAlB,0BACA,sBAAK7G,UAAWC,IAAE6G,QAAlB,UAEA,sBAAK9G,UAAWC,IAAE8D,OAAlB,UACA,cAAC,IAAD,CAASoC,GAAI,iBAAb,SACI,qBAAKnG,UAAWC,IAAE+D,OAAlB,SAA0B,qBAAK7D,IAAK4G,EAAmB1G,IAAI,wBAE3D,sBAAML,UAAWC,IAAEiE,aAAnB,SAAkC,mBAInC0B,c,kBChDIoB,MARf,SAAmBjH,GACnB,OACI,qBAAKC,UAAWC,IAAEgH,QAAlB,uB,0BCeWC,MAdf,SAAgBnH,GAEd,OACE,sBAAKC,UAAWC,IAAEyF,OAAlB,UAEE,qBAAKvF,IAAI,+EAA+EE,IAAI,kBAE5F,sBAAKL,UAAWD,EAAM0F,gBAAkBxF,IAAEkH,sBAAwBlH,IAAEmH,eAClEhB,QAASrG,EAAMsH,yBADjB,cAC4C,yBAD5C,WCLAC,E,4MACFC,kBAAoB,a,EAMpBC,OAAS,WACL,OACI,cAAC,EAAD,eAAY,EAAKzH,S,YATC0H,IAAMC,WA6BrBrC,eAXO,SAAChE,GACnB,MAAQ,CACJmD,OAAQnD,EAAMmE,KAAKhB,OACnBb,MAAOtC,EAAMmE,KAAK7B,MAClB8B,gBAAiBpE,EAAMqE,OAAOP,iBAOE,CAAEJ,cAAasC,yBLFf,WACpC,MAAO,CAAEpG,KAAMgE,KKCJI,CAAoEiC,G,mDCzB7EK,G,4MAEFJ,kBAAoB,a,EAGpBK,mBAAqB,a,EAIrBC,SAAW,SAAC9G,GACR,EAAKhB,MAAM+H,WAAW/G,I,EAG1ByG,OAAS,WACL,OACI,gCACI,gDACA,wHAEC,EAAKzH,MAAMyE,OAAS,cAAC,IAAD,CAAU2B,GAAI,YAAc,EAAKpG,MAAMwF,eAAmB,cAACwC,GAAD,CAAgBF,SAAU,EAAKA,SAAUpD,WAAY,EAAK1E,MAAM0E,WAAYqD,WAAc,EAAK/H,MAAM+H,iB,YAnBhLL,IAAMC,WA4BtBM,GAAcC,YAAQ,IA2CpBF,GAAiBG,YAAU,CAAEC,KAAM,SAAlBD,EAzCP,SAACnI,GAEb,OACI,sBAAM8H,SAAU9H,EAAMqI,aAAcpI,UAAWC,KAAEoI,UAAjD,SACI,sBAAKrI,UAAWC,KAAEqI,QAAlB,UACI,8BAAK,cAACC,EAAA,EAAD,CAAOC,YAAY,QAAQC,UAAWC,IAAOhI,KAAK,QAAQiI,SAAU,CAACC,IAAUZ,QACpF,8BAAK,cAACO,EAAA,EAAD,CAAOC,YAAY,WAAWC,UAAWC,IAAOhI,KAAK,WAAWiI,SAAU,CAACC,IAAUZ,QAC1F,qBAAKhI,UAAWC,KAAEsE,WAAlB,SACI,kCACI,iDACA,cAACgE,EAAA,EAAD,CAAOtH,KAAK,WAAWwH,UAAU,QAAQ/H,KAAK,oBAGrDX,EAAM8I,OAAS,sBAAK7I,UAAWC,KAAE6I,YAAlB,cAAiC/I,EAAM8I,SAEvD,sBAAK7I,UAAWC,KAAE8I,eAAlB,UACA,wBAAQ/I,UAAWC,KAAE+I,YAArB,mBACA,qBAAKhJ,UAAWC,KAAE+I,YAAa5C,QAAS,WAAKrG,EAAM+H,WAAW,CAACzD,MAAM,qBAAqBC,SAAS,UAAnG,4BAGCvE,EAAM0E,YAAc,gCACjB,qBAAKtE,IAAKJ,EAAM0E,WAAYpE,IAAI,YAC/B4I,YAAY,qBAAsB,UAAW,CAACL,KAAWF,gBAqBjEQ,GAAe7D,aAVN,SAAChE,GACnB,MAAQ,CACJmD,OAAQnD,EAAMmE,KAAKhB,OACnBC,WAAYpD,EAAMmE,KAAKf,WACvBc,aAAclE,EAAMmE,KAAK/E,MAMoB,CAAEqH,WPsB7B,SAAC/G,GAEvB,OACI,SAACC,GACGyC,IAAkBE,MAAM5C,GAAMqB,MAAK,SAACC,GACC,IAA7BA,EAAStB,KAAK0B,WACdzB,EAAS0C,MAGTyF,QAAQC,IAAI/G,EAAStB,KAAK0B,YACO,KAA7BJ,EAAStB,KAAK0B,YACdzB,EAAS4C,KAEb5C,EAASqI,YAAW,QAAS,CAAEC,OAAQjH,EAAStB,KAAKwI,SAAS,aOnCtDlE,CAAyCsC,I,oBC9ExD6B,GAA0BC,cALhB,SAACpI,GACpB,OAAQA,EAAMqI,UAAUC,SAI0C,SAACA,GAEnE,OADAR,QAAQC,IAAI,qBACLO,KASEC,GAAc,SAACvI,GACxB,OAAQA,EAAMqI,UAAU1H,UAGf6H,GAAgB,SAACxI,GAC1B,OAAQA,EAAMqI,UAAUI,iBAGfC,GAAiB,SAAC1I,GAC3B,OAAQA,EAAMqI,UAAU3H,aAGfiI,GAAgB,SAAC3I,GAC1B,OAAQA,EAAMqI,UAAUO,YAGfC,GAA4B,SAAC7I,GACtC,OAAQA,EAAMqI,UAAUS,0B,SCjCtBC,GAAS,SACTC,GAAW,WACXC,GAAY,YACZC,GAAmB,mBACnBC,GAAuB,uBACvBC,GAAW,WACXC,GAAgB,gBAChBC,GAAqB,qBACrBC,GAA+B,+BAmBjCrK,GAAe,CACfoJ,MAAO,GAEP3H,SAAU,EACV6I,YAAa,EACbf,gBAAiB,GACjB/H,YAAa,EACbkI,YAAY,EACZE,yBAA0B,GAC1BW,KAAK,GACL7I,SAAS,MAqJF8I,GAAW,SAACpB,GACnB,MAAO,CACH1I,KAAMqJ,GACLX,UAwBEqB,GAAqB,SAACC,GAC7B,MAAO,CACHhK,KAAMuJ,GACLS,uBAUEC,GAAmB,SAACjB,GAC3B,MACI,CAAEhJ,KAAM0J,GACHV,eAcFkB,GAA4B,SAACC,EAAgB3K,GACpD,MACI,CAAEQ,KAAM2J,GACHQ,QACC3K,OA4DC4K,GAtQM,WAA4E,IAA3EhK,EAA0E,uDAAhDd,GAAce,EAAkC,uCAE5F,OAAQA,EAAOL,MAEX,KAAKmJ,GACD,OAAO,2BACA/I,GADP,IAEIsI,MAAOtI,EAAMsI,MAAM7D,KAAI,SAAAwF,GACnB,OAAIA,EAAE7K,KAAOa,EAAOiB,OACT,2BAAK+I,GAAZ,IAAeC,UAAU,IAEfD,OAK1B,KAAKjB,GACD,OAAO,2BACAhJ,GADP,IAEIsI,MAAOtI,EAAMsI,MAAM7D,KAAI,SAAAwF,GACnB,OAAIA,EAAE7K,KAAOa,EAAOiB,OACT,2BAAK+I,GAAZ,IAAeC,UAAU,IAEfD,OAK1B,KAAKhB,GACD,OAAO,2BACAjJ,GADP,IACcsI,MAAOrI,EAAOqI,QAIhC,KAAKY,GACD,OAAO,2BACAlJ,GADP,IAEIU,YAAaT,EAAOkK,OAI5B,KAAKhB,GACD,OAAO,2BACAnJ,GADP,IAEIyI,gBAAiBxI,EAAO2J,qBAIhC,KAAKN,GACD,OAAO,2BACAtJ,GADP,IAEI4I,WAAY3I,EAAO2I,aAI3B,KAAKW,GACD,OAAO,2BACAvJ,GADP,IAEI8I,yBAA0B7I,EAAO8J,MAAP,uBAChB/J,EAAM8I,0BADU,CACgB7I,EAAOb,KAC3CY,EAAM8I,yBAAyBsB,QAAO,SAACC,GAAU,OAAQA,IAAQpK,EAAOb,QAGlF,KAAKiK,GACD,kCACOrJ,GADP,IAEIY,SAASX,EAAOW,SAChBF,YAAY,IAGhB,KAAK0I,GACD,kCACOpJ,GADP,IAEIyJ,KAAKxJ,EAAOwJ,KACZ/I,YAAY,IAI5B,QAAS,OAAOV,I,qCC1ETsK,GA5CK,SAAC5L,GAgBjB,OACI,sBAAKC,UAAW4L,KAAMC,UAAcD,MAAO,CAACE,IAAI,QAAhD,UAEA,uBAAOtD,YAAY,YAAYuD,MAAOhM,EAAM+K,KAAM1E,QAAS,SAAC4F,GAAKA,EAAEC,mBACnEC,SAAU,SAACF,GAAMjM,EAAMoM,UAAUH,EAAEI,cAAcL,UAEjD,sBAAK/L,UAAW4L,KAAMS,eAAtB,UACI,wBAAQjG,QAAS,SAAC4F,GAAKA,EAAEC,kBAAmBlM,EAAMuM,mBAAmBvM,EAAM8L,WAAY9L,EAAMwM,cAAc,OAA3G,UACI,uBAAQtL,KAAK,QAAQP,KAAK,WAAWqL,MAAM,WAAWS,eAAgC,MAAhBzM,EAAMkC,WAC5E,6CAEJ,wBAAQmE,QAAS,SAAC4F,GAAKA,EAAEC,kBAAmBlM,EAAMuM,mBAAmBvM,EAAM8L,WAAa9L,EAAMwM,eAAc,IAA5G,UACI,uBAAOtL,KAAK,QAAQP,KAAK,WAAWqL,MAAM,WAAWS,gBAAiC,IAAjBzM,EAAMkC,WAC3E,iDAEJ,wBAASmE,QAAS,SAAC4F,GAAKA,EAAEC,kBAAmBlM,EAAMuM,mBAAmBvM,EAAM8L,WAAa9L,EAAMwM,eAAc,IAA7G,UACI,uBAAOtL,KAAK,QAAQP,KAAK,WAAWqL,MAAM,WAAYS,gBAAiC,IAAjBzM,EAAMkC,WAC5E,4DC+CDwK,GAhFC,SAAC,GAwBb,IAvBmF,IADpE5B,EACmE,EADnEA,YAAaf,EACsD,EADtDA,gBAAiB9H,EACqC,EADrCA,SAAU0K,EAC2B,EAD3BA,eACvD3K,EAAkF,EAAlFA,YAAakI,EAAqE,EAArEA,WAAYnI,EAAyD,EAAzDA,SAAUyK,EAA+C,EAA/CA,cAAeJ,EAAgC,EAAhCA,UAAWrB,EAAqB,EAArBA,KAAM7I,EAAe,EAAfA,SAYnE,EAAqC0K,oBAAS,GAA9C,oBAAKd,EAAL,KAAgBS,EAAhB,KACIM,EAAeC,mBAGfC,EAAkBC,KAAKC,KAAKlD,EAAkB9H,GAC9CiL,EAAqBF,KAAKC,KAAKF,EAAkBjC,GACrD,EAAwC8B,mBAAS,GAAjD,oBAAKO,EAAL,KAAoBC,EAApB,KACIC,GAAyBF,EAAgB,GAAKrC,EAAc,EAC5DwC,EAAyBH,EAAgBrC,EAEzCyC,EAAa,GACRC,EAAI,EAAGA,GAAKT,EAAiBS,IAClCD,EAAWE,KAAKD,GAIpB,OACI,sBAAKvN,UAAW4L,KAAM6B,UAAWC,IAAKd,EAAtC,UACI,sBAAK5M,UAAW4L,KAAM+B,YAAtB,UACKT,EAAgB,GACb,wBAAQlN,UAAW4L,KAAMgC,WAAYxH,QAAS,WAAQ+G,EAAiBD,EAAgB,MAG1FI,EAAW7B,QAAO,SAACD,GAAW,OAAQA,GAAQ4B,GAAyB5B,GAAQ6B,KAA2BvH,KACvG,SAAC0F,GACG,OAAO,sBACHpF,QAAS,SAAC4F,GAAQU,EAAelB,IACjCxL,UAAW+B,IAAgByJ,EAAOI,KAAMiC,WAAajC,KAAMkC,cAFxD,SAGF7D,GAAclI,IAAgByJ,EAAO,qBAAKrL,IAAKC,KAAYC,IAAI,cAAsBmL,GAHxEA,MAQzB0B,EAAgBD,GACb,wBAAQjN,UAAW4L,KAAMmC,WAAY3H,QAAS,WAAQ+G,EAAiBD,EAAgB,SAS/F,qBAAKlN,UAAW4L,KAAMoC,iBAAmB5H,QAAS,WAAKkG,GAAmBT,MAErFA,GACD,cAAC,GAAD,CACA/J,SAAYA,EACZE,SAAYA,EACZD,YAAaA,EACbwK,cAAiBA,EACjBJ,UAAaA,EACbrB,KAAQA,EACRe,UAAaA,EACbS,kBAAqBA,EACrBrK,SAAUA,EACV2K,aAAcA,Q,UCpBCqB,GAjDJ,SAAC,GAA0D,IAAxDC,EAAuD,EAAvDA,KAAM/D,EAAiD,EAAjDA,yBAA0BzH,EAAuB,EAAvBA,SAAUJ,EAAa,EAAbA,OAEpD,OACI,sBAAKtC,UAAW4L,KAAMuC,iBAAtB,UAEI,qBAAKnO,UAAW4L,KAAMwC,WAAtB,SACI,sBAAKpO,UAAW4L,KAAMyC,yBAAtB,UACI,qBAAKrO,UAAW4L,KAAM0C,uBAAtB,SACI,qBAAKtO,UAAW4L,KAAM2C,YAAtB,SACI,eAAC,IAAD,CAASpI,GAAI,YAAc+H,EAAKzN,GAAhC,UACI,qBAAKN,IAAK+N,EAAKM,OAAOC,MAAQP,EAAKM,OAAOC,MAAQC,KAAerO,IAAI,WADzE,aAKR,sBAAKL,UAAW4L,KAAM+C,eAAtB,gCACKT,EAAK3C,SACA,wBAAQqD,SAAUzE,EAAyB0E,MAAK,SAACpO,GAAS,OAAQA,IAAOyN,EAAKzN,MAAQ2F,QAAS,WAC7F1D,EAASwL,EAAKzN,KADhB,2BAMA,wBAAQmO,SAAUzE,EAAyB0E,MAAK,SAACpO,GAAS,OAAQA,IAAOyN,EAAKzN,MAAQ2F,QAAS,WAC7F9D,EAAO4L,EAAKzN,KADd,iCAQlB,sBAAKT,UAAW4L,KAAMkD,UAAtB,UACI,sBAAK9O,UAAW4L,KAAMmD,gBAAtB,UACI,qBAAK/O,UAAW4L,KAAMlL,KAAtB,SAA6BwN,EAAKxN,OAClC,qBAAKV,UAAW4L,KAAM5I,OAAtB,SAA+BkL,EAAKlL,OAASkL,EAAKlL,OAAS,0CAG/D,sBAAKhD,UAAW4L,KAAMoD,iBAAtB,UACI,qBAAKhP,UAAW4L,KAAMqD,QAAtB,SAAgC,0BAChC,qBAAKjP,UAAW4L,KAAMsD,KAAtB,SAA6B,iCCFlCC,GArCH,SAACpP,GAIT,IAHA,IAAI+M,EAAkBC,KAAKC,KAAKjN,EAAM+J,gBAAkB/J,EAAMiC,UAE1DsL,EAAa,GACRC,EAAI,EAAGA,GAAKT,EAAiBS,IAClCD,EAAWE,KAAKD,GAIpB,OAEI,sBAAKvN,UAAW4L,KAAMtD,QAAtB,UAEI,cAAC,GAAD,CAAWwB,gBAAiB/J,EAAM+J,gBAC9Be,YAAa9K,EAAM8K,YACnB7I,SAAUjC,EAAMiC,SAAU0K,eAAgB3M,EAAM2M,eAChD3K,YAAahC,EAAMgC,YACnBkI,WAAYlK,EAAMkK,WAClBnI,SAAY/B,EAAM+B,SAClByK,cAAiBxM,EAAMwM,cACvBJ,UAAapM,EAAMoM,UACnBrB,KAAM/K,EAAM+K,KACZ7I,SAAUlC,EAAMkC,WAInBlC,EAAM4J,MAAM7D,KAAI,SAAAwF,GACb,OAAQ,cAAC,GAAD,CAAiB4C,KAAM5C,EAC3BnB,yBAA0BpK,EAAMoK,yBAA0BzH,SAAU3C,EAAM2C,SAAUJ,OAAQvC,EAAMuC,QADnFgJ,EAAE7K,WCxB/B2O,G,4MAaF1C,eAAiB,SAAClB,GACd,EAAKzL,MAAM2M,eAAelB,GAC1B,EAAKzL,MAAM+B,SAAS0J,EAAM,EAAKzL,MAAMiC,SAAU,EAAKjC,MAAMkC,SAAU,EAAKlC,MAAM+K,O,EAGnFtD,OAAS,WAEL,OACI,mCAGI,cAAC,GAAD,CACA1F,SAAW,EAAK/B,MAAM+B,SAClB4K,eAAgB,EAAKA,eACrB5C,gBAAiB,EAAK/J,MAAM+J,gBAC5B9H,SAAU,EAAKjC,MAAMiC,SACrB6I,YAAa,EAAK9K,MAAM8K,YACxBlB,MAAO,EAAK5J,MAAM4J,MAClB5H,YAAa,EAAKhC,MAAMgC,YACxBO,OAAQ,EAAKvC,MAAMuC,OACnBI,SAAU,EAAK3C,MAAM2C,SACrByI,0BAA2B,EAAKpL,MAAMoL,0BACtChB,yBAA0B,EAAKpK,MAAMoK,yBACrCF,WAAY,EAAKlK,MAAMkK,WACvBsC,cAAiB,EAAKxM,MAAMwM,cAC5BJ,UAAW,EAAKpM,MAAMoM,UACtBrB,KAAM,EAAK/K,MAAM+K,KACjB7I,SAAU,EAAKlC,MAAMkC,c,wDArCrC,WACIoN,KAAKtP,MAAM+B,SAASuN,KAAKtP,MAAMgC,YAAasN,KAAKtP,MAAMiC,SAAUqN,KAAKtP,MAAMkC,SAAUoN,KAAKtP,MAAM+K,Q,gCAGpG,SAAmBwE,EAAWC,EAAWC,GACrCH,KAAKtP,MAAM+K,OAASwE,EAAUxE,KAAOuE,KAAKtP,MAAMkC,WAAaqN,EAAUrN,UACxEoN,KAAKtP,MAAM+B,SAASuN,KAAKtP,MAAMgC,YAAasN,KAAKtP,MAAMiC,SAAUqN,KAAKtP,MAAMkC,SAAUoN,KAAKtP,MAAM+K,U,GATnErD,IAAMC,WAoE7BrC,gBAjBO,SAAChE,GACnB,MAAO,CACHsI,MAAOH,GAAwBnI,GAC/BW,SAAU4H,GAAYvI,GACtByI,gBAAiBD,GAAcxI,GAC/BU,YAAagI,GAAe1I,GAC5B4I,WAAYD,GAAc3I,GAC1B8I,yBAA0BD,GAA0B7I,GACpDwJ,YAAaxJ,EAAMqI,UAAUmB,YAC7B5I,SAASZ,EAAMqI,UAAUzH,SACzB6I,KAAKzJ,EAAMqI,UAAUoB,QAOW,CACpChJ,SLuLoB,SAACC,EAAqBC,EAAkBC,EAAkBC,GAC9E,OACI,SAAClB,GACGA,EAASkK,IAAiB,IAC1BrJ,IAASC,SAASC,EAAaC,EAAUC,EAAUC,GAC9CE,MAAK,SAAAqN,GACFzO,EAASkK,IAAiB,IAC1BlK,EAAS+J,GAAS0E,EAAaC,QAC/B1O,EAASgK,GAAmByE,EAAaE,kBK9LzDrN,OLuMkB,SAACC,GACnB,OACI,SAACvB,GACGA,EAASmK,IAA0B,EAAM5I,IACzCV,IAASS,OAAOC,GAAQH,MAAK,SAACK,GACP,IAAfA,GAAoBzB,EAzHb,SAACuB,GACxB,MAAO,CACHtB,KAAMmJ,GACN7H,UAsHyCqN,CAAcrN,IAC/CvB,EAASmK,IAA0B,EAAO5I,SK5MtDG,SLoNoB,SAACH,GACrB,OACI,SAACvB,GACGA,EAASmK,IAA0B,EAAM5I,IACzCV,IAASa,SAASH,GAAQH,MAAK,SAACK,GACT,IAAfA,GAAoBzB,EA1HX,SAACuB,GAC1B,MAAO,CACHtB,KAAMoJ,GACN9H,UAuHyCsN,CAAgBtN,IACjDvB,EAASmK,IAA0B,EAAO5I,SKzNtDwI,YACA2B,eLwHwB,SAAClB,GACzB,MAAO,CACHvK,KAAMsJ,GACLiB,SK1HLR,sBACAE,oBACAC,6BACAoB,cLmDuB,SAACtK,GAC5B,MAAM,CACFhB,KAAKyJ,GACLzI,aKrDAkK,UL8DmB,SAACrB,GACpB,MAAM,CAAC7J,KAAKwJ,GACRK,UK1EOzF,CAYb+J,ICxFIU,GAAsB,sBAOxBvP,GAAqC,CACrCwP,aAAa,GAqCFC,GAjCI,WAAmF,IAAlF3O,EAAiF,uDAAnDd,GAAce,EAAqC,uCACjG,OAAQA,EAAOL,OACN6O,GACM,YAAC,eACDzO,GADP,IAEI0O,aAAa,IAIL1O,G,4BCZpBd,GAAe,CACfsF,WAAY,CACR,CAAEpF,GAAI,EAAGC,KAAM,uBAAwBuD,QAAS,0EAChD,CAAExD,GAAI,EAAGC,KAAM,gBAAiBuD,QAAS,6EACzC,CAAExD,GAAI,EAAGC,KAAM,cAAeuD,QAAS,0GACvC,CAAExD,GAAI,EAAGC,KAAM,aAAcuD,QAAS,+EACtC,CAAExD,GAAI,EAAGC,KAAM,cAAeuD,QAAS,gEAchCgM,GALQ,WAAyE,IAAxE5O,EAAuE,uDAA9Cd,GAC7C,OAAOc,G,oBCZP6O,GAAWC,aAAgB,CAC3BC,YAAYhP,KACZiP,YAAYC,KACZhL,WAAW2K,GACXvG,UAAU2B,GACV7F,KAAKR,EACTmD,KAAKoI,KACLC,IAAIR,GACJtK,OAASN,IASHqL,GAAmBC,OAAOC,sCAAwCC,KAClEC,GAAQC,aAAYZ,GAAUO,GAAkBM,aAAgBC,QAGvDH,MAGfH,OAAOO,QAAUJ,GCrBjB,IAAMK,GAAmBzJ,IAAM0J,MAAK,kBAAM,iCACpCC,GAAmB3J,IAAM0J,MAAK,kBAAM,iCAEpCE,G,4MAEJC,wBAA0B,SAACC,EAAQC,GAEjC,EAAKzR,MAAM0R,mB,EAGblK,kBAAoB,WAClB,EAAKxH,MAAM2R,gBACXhB,OAAOiB,iBAAiB,qBAAsB,EAAKL,0B,EAGrDM,qBAAuB,WACrBlB,OAAOmB,oBAAoB,qBAAsB,EAAKP,0B,EAGxD9J,OAAS,WACP,OAAK,EAAKzH,MAAMgQ,YAMd,sBAAK/P,UAAU,aAAf,UACE,cAAC,EAAD,IACA,qBAAKA,UAAU,MAAf,SACE,eAAC,IAAD,CAAe8R,SAAUC,oBAAzB,sBACE,cAAC,EAAD,IACA,qBAAK/R,UAAU,eAAf,SACE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOgS,KAAK,aAAaC,QACvB,cAAC,IAAMC,SAAP,CAAgBC,SAAU,8BAAM,0BAAhC,SACE,cAACf,GAAD,QAIJ,cAAC,IAAD,CAAOY,KAAK,aAAaC,QACvB,cAAC,IAAMC,SAAP,CAAgBC,SAAU,8BAAM,0BAAhC,SACE,cAACjB,GAAD,QAKJ,cAAC,IAAD,CAAOkB,OAAK,EAACJ,KAAK,IAAIC,QAAS,cAAC,IAAD,CAAU9L,GAAE,mBAAc,EAAKpG,MAAMwF,kBAftE,OAiBE,cAAC,IAAD,CAAOyM,KAAK,cAAcC,QAAS,cAAC,EAAD,MAEnC,cAAC,IAAD,CAAOD,KAAK,WAAWC,QAAS,cAACI,GAAD,MAEhC,cAAC,IAAD,CAAOL,KAAK,WAAWC,QAAS,cAAC/I,GAAD,MAEhC,cAAC,IAAD,CAAO8I,KAAK,IAAIC,QAAS,kDAvB3B,mBAXD,cAACnS,EAAA,EAAD,K,YAlBK2H,IAAMC,WAqFpB4K,GAAsBjN,aARG,SAAChE,GAC5B,MAAO,CACL0O,YAAa1O,EAAMmP,IAAIT,YACvBxK,aAAclE,EAAMmE,KAAK/E,MAKsB,CAAEiR,cHtExB,WACzB,OACI,SAAC1Q,GACiBA,EAAS0C,KACftB,MAAK,WAAQpB,EAP8C,CAAEC,KAAM6O,UGyEnB2B,sBAA1CpM,CAA6DgM,IAGxEkB,GAvBQ,SAACxS,GACtB,OACE,cAAC,IAAMyS,WAAP,UACE,cAAC,IAAD,CAAU3B,MAAOA,GAAjB,SACE,cAACyB,GAAD,SC7EOG,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBvQ,MAAK,YAAkD,IAA/CwQ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCCdO,IAASzL,OACP,cAAC,GAAD,IACE0L,SAASC,eAAe,SAI5BV,M,mBCbA7S,EAAOC,QAAU,CAAC,YAAc,2BAA2B,UAAY,yBAAyB,QAAU,uBAAuB,WAAa,0BAA0B,eAAiB,8BAA8B,YAAc,6B,wNCKxN6I,EAAQ,SAAC3I,GAClB,IAAMqT,EAAyBrT,EAAzBqT,MAAUC,EAAhB,YAA+BtT,EAA/B,GACA,OACI,eAACuT,EAAD,2BAAiBvT,GAAjB,mBAA0B,iDAAWqT,GAAWC,IAAhD,WAMKE,EAAW,SAACxT,GACrB,IAAMqT,EAAyBrT,EAAzBqT,MAAUC,EAAhB,YAA+BtT,EAA/B,GACA,OACI,eAACuT,EAAD,2BAAiBvT,GAAjB,mBAA0B,oDAAcqT,GAAWC,IAAnD,WAMFC,EAAc,SAACvT,GAEjB,IAAKyT,EAAkBzT,EAAlByT,KAAMC,EAAY1T,EAAZ0T,SACP5K,EAAQ2K,EAAKE,SAAWF,EAAK3K,MACjC,OACI,sBAAK7I,UAAS,UAAK4L,IAAM+H,aAAX,YAA2B9K,EAAQ+C,IAAM/C,MAAQ,IAA/D,UACI,8BACK4K,IAEJ5K,GAAS,qCAAQ2K,EAAK3K,aAOtBI,EAAc,SAACT,EAAa9H,EAAMkT,EAAYnL,GAAsC,IAA3B1I,EAA0B,uDAAlB,GAAI8T,EAAc,uDAAP,GACrF,OACI,gCACI,cAAC,IAAD,aAAOrL,YAAaA,EAAaC,UAAWA,EAAWE,SAAUiL,EAAYlT,KAAMA,GAAYX,IAC9F8T,O,gCC3Cb,oEAAO,IAAMjL,EAAU,SAACmD,GACxB,IAAIA,EACJ,MAAO,0BAIM9D,EAAS,SAAC6L,GACnB,OACI,SAAC/H,GACG,GAAGA,GAASA,EAAMgI,OAASD,EAAK,MAAQ,kCAAoCA,K,0UCNlFE,EAAe,eACfC,EAAmB,mBACnBC,EAAa,aACbC,EAAc,cACdC,EAAqB,qBACrBC,EAAwB,wBACxBC,EAAmB,mBAsCrB/T,EAAe,CACfgU,UAAW,CACP,CAAE9T,GAAI,EAAG+T,MAAO,GAAI5T,QAAS,gBAC7B,CAAEH,GAAI,EAAG+T,MAAO,GAAI5T,QAAS,cAC7B,CAAEH,GAAI,EAAG+T,MAAO,GAAI5T,QAAS,oBAIjC6T,YAAa,KACbzR,OAAQ,GACRiH,YAAY,EACZyK,WAAW,GAkGF3R,EAAY,SAACC,GACtB,MAAO,CACH/B,KAAMiT,EACNlR,WAwBK2R,EAAe,SAACC,GACzB,MAAO,CACH3T,KAAMoT,EACNO,UAUKC,EAAiB,WAC1B,MAAO,CACH5T,KAAMqT,IAYDQ,EAA2B,SAACjB,GACrC,OAAO,SAAC7S,GACJA,EA9FyB,SAAC6S,GAC9B,MAAO,CACH5S,KAAM+S,EACNH,QA2FSkB,CAAkBlB,IAC3B7S,EAASG,YAAM,cAMVsQ,EAAkB,WAC3B,OAAO,SAACzQ,GACJA,EAAS6T,KACTG,YAAW,WACPhU,EAAS6T,OACV,OAIEhS,EAAiB,SAACN,GAC3B,OACI,SAACvB,GACGA,EAAS2T,GAAa,IACtB/R,IAAWC,eAAeN,GAAQH,MAAK,SAACrB,GACpCC,EA1FL,CACHC,KAAMgT,EACNQ,YAwFgC1T,IACxBC,EAAS2T,GAAa,SAOzB7R,EAAY,SAACP,GACtB,OACI,SAACvB,GACG4B,IAAWE,UAAUP,GAAQH,MAAK,SAACC,GAC/BrB,EAAS+B,EAAUV,EAAStB,YAO/BkU,EAAe,SAACjS,GACzB,8CACI,WAAOhC,GAAP,SAAA6D,EAAA,+EAE6BjC,IAAWG,UAAUC,GAFlD,OAGyC,IAHzC,OAGqBjC,KAAK0B,YAAoBzB,EAAS+B,EAAUC,IAHjE,gDAMoBkS,MAAM,EAAD,IANzB,yDADJ,uDAaShS,EAAY,SAACiS,GACtB,8CAAQ,WAAOnU,GAAP,eAAA6D,EAAA,6DACJ7D,EAAS2T,GAAa,IADlB,SAEiB/R,IAAWM,UAAUiS,GAFtC,OAG6B,KAD7B9S,EAFA,QAGStB,KAAK0B,aACdzB,EAAS2T,GAAa,IACtB3T,GAvGqBwN,EAuGKnM,EAAStB,KAAKA,KAAKyN,OAtG9C,CACHvN,KAAMmT,EACN5F,aA+FI,iCAlGoB,IAACA,IAkGrB,OAAR,uDAaSjL,EAAc,SAACC,GACxB,8CAAQ,WAAOxC,EAAcoU,GAArB,iBAAAvQ,EAAA,6DACAtC,EAAS6S,IAAW5P,KAAK/E,GADzB,SAGiBmC,IAAWW,YAAYC,GAHxC,UAI6B,KAD7BnB,EAHA,QAIStB,KAAK0B,WAJd,gBAKAzB,EAAS6B,EAAeN,IALxB,8BAQAvB,EAASqI,YAAW,eAAgB,CAAEC,OAAQjH,EAAStB,KAAKwI,SAAS,MARrE,kBASQ8L,QAAQC,OAAOjT,EAAStB,KAAKwI,SAAS,KAT9C,4CAAR,yDAgBW+G,IAvOQ,WAAyE,IAAxEjP,EAAuE,uDAA9Cd,EAAce,EAAgC,uCAE3F,OAAQA,EAAOL,MAEX,KAAK+S,EACD,OAAO,2BAAK3S,GAAZ,IAAmBkT,UAAU,GAAD,mBAAMlT,EAAMkT,WAAZ,CAAuB,CAAE9T,GAAIY,EAAMkT,UAAUR,OAAQS,MAAO,EAAG5T,QAASU,EAAOuS,UAE/G,KAAKM,EACD,OAAO,2BACA9S,GADP,IACckT,UAAWlT,EAAMkT,UAAU9I,QAAO,SAAA8J,GAAC,OAAIA,EAAE9U,KAAOa,EAAOb,QAGzE,KAAKwT,EACD,OAAO,2BAAK5S,GAAZ,IAAmBoT,YAAanT,EAAOmT,cAE3C,KAAKP,EACD,OAAO,2BACA7S,GADP,IAEI2B,OAAQ1B,EAAO0B,SAGvB,KAAKoR,EACD,OAAO,2BACA/S,GADP,IAEIoT,YAAY,2BAAMpT,EAAMoT,aAAb,IAA0BjG,OAAQlN,EAAOkN,WAG5D,KAAK6F,EACD,OAAO,2BACAhT,GADP,IAEI4I,WAAY3I,EAAOsT,QAG3B,KAAKN,EACD,OAAO,2BACAjT,GADP,IAEIqT,WAAYrT,EAAMqT,YAI1B,QAAS,OAAOrT,K,gCC3GT,QAA0B,oC,mBCCzCzB,EAAOC,QAAU,CAAC,OAAS,uBAAuB,OAAS,uBAAuB,aAAe,+B,mBCAjGD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,eAAiB,+BAA+B,sBAAwB,wC,mBCA1HD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,MAAQ,4BAA4B,YAAc,oC,kBCAtHD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,iBAAmB,gCAAgC,WAAa,0BAA0B,yBAA2B,wCAAwC,uBAAyB,sCAAsC,YAAc,2BAA2B,eAAiB,8BAA8B,UAAY,yBAAyB,gBAAkB,+BAA+B,iBAAmB,gCAAgC,KAAO,oBAAoB,OAAS,sBAAsB,QAAU,uBAAuB,KAAO,oBAAoB,WAAa,0BAA0B,YAAc,2BAA2B,WAAa,0BAA0B,WAAa,0BAA0B,UAAY,yBAAyB,eAAiB,8BAA8B,UAAY,yBAAyB,iBAAmB,gCAAgC,kBAAoB,oC","file":"static/js/main.cae28f30.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav_bar\":\"Nav_bar_nav_bar__2M1PX\",\"noBar\":\"Nav_bar_noBar__fhQ7l\",\"MyFriends\":\"Nav_bar_MyFriends__2OiuZ\",\"item\":\"Nav_bar_item__32w2d\",\"login\":\"Nav_bar_login__1Pxez\",\"activeLink\":\"Nav_bar_activeLink__1ojz6\",\"notActiveLink\":\"Nav_bar_notActiveLink__3U2cx\",\"logOut\":\"Nav_bar_logOut__3Rwa8\",\"logIn\":\"Nav_bar_logIn__1P_WZ\",\"friends\":\"Nav_bar_friends__1ML5H\",\"BestFriends\":\"Nav_bar_BestFriends__1hy40\",\"friend\":\"Nav_bar_friend__uqrvX\",\"circle\":\"Nav_bar_circle__3FeWe\",\"friends_name\":\"Nav_bar_friends_name__1pf5x\"};","import React from 'react'\r\nimport preloadGif from '../../../assets/images/loader.gif'\r\nimport s from './Preloader.module.css'\r\n\r\nlet Preloader = (props) => {\r\n\r\n    return (\r\n        <div className={s.imgWrap}>\r\n            <img src={preloadGif} alt=\"preloader\" ></img>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader","export default __webpack_public_path__ + \"static/media/user.974a2221.jpg\";","import { reset } from 'redux-form';\r\n\r\nconst SEND_USER_MESSAGE = \"SEND_USER_MESSAGE\"\r\n\r\n\r\n\r\n\r\n\r\ntype DialogsData = {\r\n    id:number\r\n    name:string\r\n}\r\n\r\ntype MessageData = {\r\n    id:number\r\n    message:string\r\n}\r\n\r\n\r\n\r\n\r\nlet initialState = {\r\n    dialogsData: [\r\n        { id: 1, name: \"Dimych\" },\r\n        { id: 2, name: \"Ahmed\" },\r\n        { id: 3, name: \"Pahsa\" },\r\n        { id: 4, name: \"Olya\" },\r\n        { id: 5, name: \"Vita\" },\r\n        { id: 6, name: \"Maksym\" },\r\n    ]as Array<DialogsData>,\r\n\r\n    messagesData: [\r\n        { id: 1, message: \"hi\" },\r\n        { id: 0, message: \"koorva mach ego\" },\r\n        { id: 1, message: \"Hi how are you?\" },\r\n        { id: 0, message: \"Hi how are you?\" },\r\n    ]as Array<MessageData>,\r\n\r\n    userInputMessage: \"\" as string|null\r\n}\r\n\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n\r\n\r\n\r\nconst dialogsReducer = (state:InitialStateType = initialState, action:any):InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SEND_USER_MESSAGE:\r\n            return { ...state, messagesData: [...state.messagesData, { id: 0, message: action.data, }], userInputMessage: \"\" };    /* lesson#47.3 pay attention to use square brackets, when you creating an array  */\r\n\r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const sendUserMessageCreator = (data:string) => {\r\n    return {\r\n        type: SEND_USER_MESSAGE,\r\n        data\r\n    }\r\n}\r\n\r\n\r\nexport const SendMessageThunk = (data:string) => {\r\n    return (dispatch:any) => {\r\n        dispatch(sendUserMessageCreator(data));\r\n        dispatch(reset(\"dialogsForm\"));  //thi is the way to clear input of a form after submission\r\n    }\r\n}\r\n\r\n\r\nexport default dialogsReducer;\r\n\r\n","import axios from \"axios\"\r\n\r\n\r\n/* we create an object for an instance.   the axios.create will automatically set the settings parameters in proper sequence for different server request  */\r\nconst instance = axios.create({\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",         /* inside we specify our baseURL */\r\n    withCredentials: true,                                            /* cookie sender request (we have to specify it manually, because of multi domain requests )*/\r\n    headers: { \"API-KEY\": \"dcee9e24-009d-463a-88e9-8f7f599b9d34\" }        /* the access key you required to write in every request you make (except get request - you do not required for get request) */\r\n})\r\n\r\n\r\n\r\n/* create an object for each component and create different methods for server requests   */\r\nexport const usersAPI = {\r\n\r\n    getUsers: (currentPage = 1, pageSize = 5, isFriend, userName) => {\r\n        return (\r\n            instance.get(`users?page=${currentPage}&count=${pageSize}\r\n            &friend=${typeof isFriend != \"undefined\"? isFriend:null}\r\n            &term=${typeof userName != \"undefined\"? userName:\"\" }\r\n            `)\r\n            \r\n                .then((response) => {\r\n                    return (\r\n                        response.data\r\n                    )\r\n                })\r\n        )\r\n    },\r\n\r\n    follow: (userId) => {\r\n        return (\r\n            instance.post(`follow/${userId}`)\r\n                .then((response) => {\r\n                    return (\r\n                        response.data.resultCode\r\n                    )\r\n                })\r\n\r\n        )\r\n\r\n    },\r\n\r\n    unfollow: (userId) => {\r\n        return (\r\n            instance.delete(`follow/${userId}`)\r\n                .then((response) => {\r\n                    return (\r\n                        response.data.resultCode\r\n                    )\r\n                })\r\n\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const profileAPI = {\r\n    getUserProfile: (userId) => {\r\n        return (\r\n            instance.get(`profile/ ${userId}`).then((response) => {\r\n                return (\r\n                    response.data\r\n                )\r\n            })\r\n        )\r\n    },\r\n\r\n    getStatus: (userId) => {\r\n        return (\r\n            instance.get('profile/status/' + userId)\r\n        )\r\n    },\r\n\r\n    setStatus: (status) => {\r\n        return (instance.put('profile/status', { status }))   //remember put and post have payload you can send to server - it is an object \r\n    },\r\n\r\n\r\n    //! read about \"Content-Type\":'multipart/form-data'  and how to send a file to the server\r\n    savePhoto: (photo) => {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photo)     //this is the way we create a special object, before sending the photo file to the server \r\n\r\n        return (instance.put('profile/photo', formData, { headers: { \"Content-Type\": 'multipart/form-data' } }))\r\n    },\r\n\r\n\r\n    saveProfile: (profileData) => {\r\n        return (instance.put('profile', profileData))\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nexport const authenticationAPI = {\r\n\r\n    authenticate: () => {\r\n        return (\r\n            instance.get(\"auth/me/\").then((response) => {\r\n                return (\r\n                    response.data\r\n                )\r\n            })\r\n        )\r\n\r\n    },\r\n\r\n\r\n    login: (data) => {\r\n        return (\r\n            instance.post('auth/login/', data)\r\n        )\r\n    },\r\n\r\n    getCaptchaUrl: () => {\r\n        return (\r\n            instance.get('/security/get-captcha-url')\r\n        )\r\n    },\r\n\r\n\r\n\r\n    logout: () => {\r\n        return (\r\n            instance.delete('auth/login/')\r\n        )\r\n    }\r\n\r\n\r\n}","import React from 'react';\r\nimport s from \"./Friend.module.css\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction Friend(props) {\r\n\r\n    return (\r\n        <div className={s.friend}>\r\n            <div className={s.circle}><img src={props.picture} alt=\"Friend's avatar\" /></div>\r\n            <span className={s.friends_name}>{props.name}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Friend;","import { stopSubmit } from \"redux-form\"\r\nimport { authenticationAPI } from \"../api/api\"\r\n\r\nconst SET_USERS_DATA = 'SET_USERS_DATA'\r\nconst GET_CAPTCHA_URL_SUCCESS = 'Auth/GET_CAPTCHA_URL_SUCCESS'\r\n\r\ntype InitialStateTrial = {\r\n    id: number|null,\r\n    login: string|null,\r\n    email: string|null,\r\n    password: string|null,\r\n    rememberMe: boolean,\r\n    isAuth: boolean,\r\n    captchaUrl: string|null,  \r\n}\r\n\r\n\r\nlet initialState = {\r\n    id: null as number|null,\r\n    login: null as string|null,\r\n    email: null as string|null,\r\n    password: null as string|null,\r\n    rememberMe: false,\r\n    isAuth: false,\r\n    captchaUrl: null as string|null      //if null then the captcha is nor required\r\n}\r\n\r\nexport type InitialStateType  = typeof initialState\r\n\r\nconst authReducer = (state:InitialStateType = initialState, action:any):InitialStateType => {\r\n    switch (action.type) {\r\n       \r\n        case SET_USERS_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        \r\n        \r\n\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n\r\n       \r\n        \r\n\r\n        default: return state\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\ntype DataType = {\r\n    id:number|null\r\n        email:string|null\r\n        login:string |null\r\n        isAuth:boolean\r\n    }\r\n\r\ntype authorizationACType = {\r\n    type:typeof SET_USERS_DATA\r\n    data:DataType\r\n}\r\nexport let authorizationAC = (id:number|null, email:string|null, login:string|null, isAuth:boolean):authorizationACType =>\r\n { return ({ type: SET_USERS_DATA, data: { id, email, login, isAuth } }) }\r\n\r\n\r\ntype getCaptchaUrlSuccessType = {\r\n    type: typeof GET_CAPTCHA_URL_SUCCESS\r\n    payload:{captchaUrl:string}\r\n}\r\n\r\nexport let getCaptchaUrlSuccess = (captchaUrl:string):getCaptchaUrlSuccessType => { return ({ type: GET_CAPTCHA_URL_SUCCESS, payload: { captchaUrl } }) }\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* thunk */\r\n\r\nexport const authenticate = () => {\r\n    return (\r\n        (dispatch:any) => {\r\n            return (\r\n                authenticationAPI.authenticate().then((response) => {\r\n                    if (response.resultCode === 0) {\r\n                        let { id, email, login } = response.data;\r\n                        dispatch(authorizationAC(id, email, login, true))  /* if response code ===0 it means we entered and we can send our isAuth to true */\r\n                    }\r\n                    else { dispatch(authorizationAC(null, null, null, false)) }\r\n                })\r\n            )  /* end of return */\r\n        }\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const loginThunk = (data:DataType) => {\r\n    debugger\r\n    return (\r\n        (dispatch:any) => {\r\n            authenticationAPI.login(data).then((response) => {\r\n                if (response.data.resultCode === 0) {\r\n                    dispatch(authenticate());      /* we call authenticate to update Header !*/\r\n                }\r\n                else {\r\n                    console.log(response.data.resultCode)\r\n                    if (response.data.resultCode === 10) {\r\n                        dispatch(getCaptchaUrl())\r\n                    }\r\n                    dispatch(stopSubmit(\"login\", { _error: response.data.messages[0] }))\r\n                }\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\n\r\nexport const getCaptchaUrl = () => {\r\n    return (async (dispatch:any) => {\r\n        let response = await authenticationAPI.getCaptchaUrl();\r\n        let captchaUrl = response.data.url;\r\n        dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n    })\r\n}\r\n\r\n\r\nexport const logoutThunk = () => {\r\n    return (\r\n        (dispatch:any) => {\r\n            authenticationAPI.logout().then((response) => {\r\n                if (response.data.resultCode === 0) {\r\n                    dispatch(authenticate());   /* we call authenticate to update Header !*/\r\n\r\n                }\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default authReducer;","const OPEN_CLOSE_HAMBURGER_MENU = \"OPEN_CLOSE_HAMBURGER_MENU\"\r\nconst CLOSE_HAMBURGER_MENU = \"CLOSE_HAMBURGER_MENU\"\r\n\r\n\r\n\r\nlet initialState = {\r\n    hamburgerMenu: false\r\n}\r\n\r\ntype InitialState = typeof initialState\r\n\r\n\r\nconst headerReducer = (state:InitialState = initialState, action:any):InitialState => {\r\n\r\n    switch (action.type) {\r\n        case OPEN_CLOSE_HAMBURGER_MENU:\r\n            return { ...state, hamburgerMenu: !state.hamburgerMenu };\r\n\r\n        case CLOSE_HAMBURGER_MENU:\r\n            return { ...state, hamburgerMenu: false };\r\n\r\n\r\n        default: return state;\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\ntype OpenCloseHamburgerMenuAC = {\r\n    type : typeof OPEN_CLOSE_HAMBURGER_MENU\r\n}\r\n\r\n\r\nexport const openCloseHamburgerMenuAC = ():OpenCloseHamburgerMenuAC => {\r\n    return { type: OPEN_CLOSE_HAMBURGER_MENU }\r\n}\r\n\r\n\r\ntype CloseHamburgerMenuAC = {\r\n    type : typeof CLOSE_HAMBURGER_MENU\r\n    payload:boolean\r\n}\r\n\r\nexport const closeHamburgerMenuAC = ():CloseHamburgerMenuAC => {\r\n    return { type: CLOSE_HAMBURGER_MENU, payload: false }\r\n}\r\n\r\n\r\nexport default headerReducer;","export default __webpack_public_path__ + \"static/media/Profile.b0c5a322.png\";","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport Friend from './Friend/Friend';\r\nimport s from \"./Nav_bar.module.css\";\r\nimport { logoutThunk } from \"../../Redux/Auth\"\r\nimport { closeHamburgerMenuAC } from \"../../Redux/header-reducer\"\r\nimport ihorBorzovPicture from \"../../assets/images/Profile.png\"\r\n\r\n\r\n\r\nfunction Nav_bar(props) {\r\n\r\n  let displayFriends = props.state.friendData.map((friendsObject) =>\r\n    <Friend picture={friendsObject.picture} key={friendsObject.id} name={friendsObject.name} />)\r\n\r\n\r\n  return (\r\n    <div className={props.onOffBurgerMenu ? s.nav_bar : s.noBar}>\r\n      {/* this is the way to add active className */}\r\n\r\n      <div className={s.item}><Link to={\"/profile/\" + props.authorizedId} onClick={props.closeHamburgerMenuAC}\r\n        className={navData => navData.isActive ? s.activeLink : s.notActiveLink} >Profile</Link></div>    {/* this is the way I create the links here, and they automatically link to the links  */}\r\n\r\n      <div className={`${s.item} ${s.another}`}><Link to='/dialogs' onClick={props.closeHamburgerMenuAC}\r\n        className={navData => navData.isActive ? s.activeLink : s.notActiveLink} >Messages</Link></div>  {/* // this is the way to use two classNames */}\r\n\r\n      <div className={s.item}><Link to=\"/users\" onClick={props.closeHamburgerMenuAC}\r\n        className={navData => navData.isActive ? s.activeLink : s.notActiveLink} >Users</Link></div>\r\n\r\n      <div className={s.item}> <Link to=\"/settings\" onClick={props.closeHamburgerMenuAC}\r\n        className={navData => navData.isActive ? s.activeLink : s.notActiveLink} >Settings</Link> </div>\r\n\r\n      <div className={s.item}>\r\n        {props.isAuth ?\r\n          <div className={s.logOut} onClick={() => { props.logoutThunk(); props.closeHamburgerMenuAC() }}>\r\n            {/* <NavLink to={'/login'}>Logout</NavLink> */}\r\n            <NavLink to={'/profile/*'}>Logout</NavLink>\r\n          </div>\r\n\r\n          : <div className={s.logIn} onClick={props.closeHamburgerMenuAC} >\r\n            <NavLink to={'/login'}>Login</NavLink>\r\n          </div>}\r\n\r\n      </div>\r\n\r\n\r\n      <div className={s.MyFriends}>\r\n        <div className={s.BestFriends}>Best Friends</div>\r\n        <div className={s.friends}>\r\n\r\n        <div className={s.friend}>\r\n        <NavLink to={\"/profile/\" + 22624}>\r\n            <div className={s.circle}><img src={ihorBorzovPicture} alt=\"Friend's avatar\" /></div>\r\n            </NavLink>\r\n            <span className={s.friends_name}>{\"Ihor Borzov\"}</span>\r\n        \r\n        </div>\r\n\r\n          {displayFriends}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nlet mapStoreToProps = (state) => {\r\n  return {\r\n    state: state.navBarPage,\r\n    authorizedId: state.auth.id,\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login,\r\n    onOffBurgerMenu: state.header.hamburgerMenu,\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStoreToProps, { logoutThunk, closeHamburgerMenuAC })(Nav_bar);\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport s from './Settings.module.css'\r\n\r\nfunction Settings (props){\r\nreturn(\r\n    <div className={s.content}>\r\n        Settings\r\n    </div>\r\n)\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport s from \"./Header.module.css\";\r\n\r\n\r\n\r\n\r\nfunction Header(props) {\r\n\r\n  return (\r\n    <div className={s.header}>\r\n      \r\n      <img src=\"https://i.pinimg.com/originals/9f/69/af/9f69af8062e69951f7527962f45e63d1.png\" alt=\"Web page icon\" />\r\n\r\n      <div className={props.onOffBurgerMenu ? s.header__burger_active : s.header__burger}\r\n        onClick={props.openCloseHamburgerMenuAC}> <span></span> </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { logoutThunk } from \"../../Redux/Auth\"\r\nimport { openCloseHamburgerMenuAC } from \"../../Redux/header-reducer\"\r\nimport Header from './Header'\r\n\r\n\r\n\r\nclass HeaderContainer extends React.Component {\r\n    componentDidMount = () => {\r\n        //this.props.authenticate();\r\n    }\r\n\r\n\r\n\r\n    render = () => {\r\n        return (\r\n            <Header {...this.props} />\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return ({\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n        onOffBurgerMenu: state.header.hamburgerMenu\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, { logoutThunk, openCloseHamburgerMenuAC })(HeaderContainer)","import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { Navigate } from \"react-router-dom\"\r\nimport { reduxForm } from \"redux-form\"\r\nimport { Field } from \"redux-form\"\r\nimport { loginThunk } from \"../../Redux/Auth\"\r\nimport { maxChar, required } from \"../../Utilities/FormValidators/validators\"\r\nimport { createField, Input } from \"../common/FormControls/FormControls\"\r\nimport s from \"../Login/Login.module.css\"\r\n\r\n\r\n\r\nclass Login extends React.Component {\r\n\r\n    componentDidMount = () => {\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n\r\n    }\r\n\r\n    onSubmit = (data) => {\r\n        this.props.loginThunk(data)\r\n    }\r\n\r\n    render = () => {\r\n        return (\r\n            <div>\r\n                <div>LOGIN please!</div>\r\n                <div>You are welcome to visit my page - find me in the best friends (Nav-Bar): Ihor Borzov</div>\r\n\r\n                {this.props.isAuth ? <Navigate to={\"/profile/\" + this.props.authorizedId} /> : <LoginReduxForm onSubmit={this.onSubmit} captchaUrl={this.props.captchaUrl} loginThunk = {this.props.loginThunk} />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nlet maximumChar = maxChar(20) /* this is our flexible validator with closure, for now we have to invoke it this way */\r\n\r\nlet LoginForm = (props) => {\r\n\r\n    return (\r\n        <form onSubmit={props.handleSubmit} className={s.loginForm}>\r\n            <div className={s.wrapper}>\r\n                <div><Field placeholder='email' component={Input} name=\"email\" validate={[required, maximumChar]}  ></Field></div>\r\n                <div><Field placeholder='password' component={Input} name=\"password\" validate={[required, maximumChar]}  ></Field></div>\r\n                <div className={s.rememberMe}>\r\n                    <label>\r\n                        <span> remember me </span>\r\n                        <Field type=\"checkbox\" component=\"input\" name=\"rememberMe\"></Field>\r\n                    </label>\r\n                </div>\r\n                {props.error && <div className={s.commonError}> {props.error}</div>}\r\n\r\n                <div className={s.buttonsWrapper}>\r\n                <button className={s.loginButton}>Login</button>\r\n                <div className={s.loginButton} onClick={()=>{props.loginThunk({email:\"free@samuraijs.com\",password:\"free\"})}}>Guest Login</div>\r\n                </div>\r\n\r\n                {props.captchaUrl && <div>\r\n                    <img src={props.captchaUrl} alt=\"captcha\" ></img>\r\n                    {createField(\"symbols from image\", \"captcha\", [required], Input)}\r\n                </div>}\r\n                    \r\n\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return ({\r\n        isAuth: state.auth.isAuth,\r\n        captchaUrl: state.auth.captchaUrl,\r\n        authorizedId: state.auth.id\r\n    })\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({ form: \"login\" })(LoginForm);\r\n\r\nexport const LoginConnect = connect(mapStateToProps, { loginThunk })(Login)\r\n\r\nexport default LoginConnect\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*Guest Email: free@samuraijs.com   Password: free\r\n my credentials: jsmesh@mail.ru    jamperxy23*/\r\n\r\n","import { createSelector } from \"reselect\"\r\n\r\nconst getUsersSelect = (state) => {\r\n    return (state.usersPage.users)\r\n}\r\n\r\n/* this is main reselector */\r\nexport const getUsersSuperReselector = createSelector(getUsersSelect, (users) => {\r\n    console.log(\"reselector worked\");\r\n    return users\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const getPageSize = (state) => {\r\n    return (state.usersPage.pageSize)\r\n}\r\n\r\nexport const getUsersCount = (state) => {\r\n    return (state.usersPage.totalUsersCount)\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return (state.usersPage.currentPage)\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return (state.usersPage.isFetching)\r\n}\r\n\r\nexport const getFollow_unfollowUserIds = (state) => {\r\n    return (state.usersPage.following_unfollowingIds)\r\n}","import { usersAPI } from \"../api/api\"\r\n\r\nconst FOLLOW = \"FOLLOW\"\r\nconst UNFOLLOW = \"UNFOLLOW\"\r\nconst SET_USERS = \"SET_USERS\"\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\"\r\nconst SET_TOTAL_USER_COUNT = \"SET_TOTAL_USER_COUNT\"\r\nconst SET_TERM = \"SET_TERM\"\r\nconst SET_IS_FRIEND = \"SET_IS_FRIEND\"\r\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\"\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = \"TOGGLE_IS_FOLLOWING_PROGRESS\"\r\n\r\n\r\n\r\ntype Photos = {\r\n    small: null | string,\r\n    large: null | string\r\n}\r\n\r\nexport type UserType = {\r\n    name: null | string,\r\n    id: number,\r\n    uniqueUrlName: null | string,\r\n    status: null | string,\r\n    followed: boolean\r\n    photos: Photos\r\n}\r\n\r\n\r\nlet initialState = {\r\n    users: [ ] as Array<UserType>,\r\n\r\n    pageSize: 5,\r\n    portionSize: 5,\r\n    totalUsersCount: 26,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    following_unfollowingIds: [] as Array<number>,\r\n    term:\"\",\r\n    isFriend:null as null | boolean\r\n}\r\n\r\n\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n\r\nconst usersReducer = (state: InitialStateType = initialState, action: any): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return { ...u, followed: true }\r\n                    }\r\n                    else { return u }\r\n                })\r\n            }\r\n\r\n\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return { ...u, followed: false }\r\n                    }\r\n                    else { return u }\r\n                })\r\n            }\r\n\r\n\r\n        case SET_USERS:\r\n            return {\r\n                ...state, users: action.users   /* each time we rewrite and reassign users */\r\n            }\r\n\r\n\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.page,\r\n            }\r\n\r\n\r\n        case SET_TOTAL_USER_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.newTotalUsersCount,\r\n            }\r\n\r\n\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching,\r\n            }\r\n\r\n\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                following_unfollowingIds: action.check\r\n                    ? [...state.following_unfollowingIds, action.id]        /* if fallowing is processing add received userID */\r\n                    : state.following_unfollowingIds.filter((ids) => { return (ids !== action.id) })  /* if fallowing is finished remove received userID.   we do not have to do destructurisation over her, because method filter will return a new array */\r\n            }\r\n\r\n            case SET_IS_FRIEND:\r\n                return{\r\n                    ...state,\r\n                    isFriend:action.isFriend,\r\n                    currentPage:1\r\n                }\r\n\r\n                case SET_TERM:\r\n                    return{\r\n                        ...state,\r\n                        term:action.term,\r\n                        currentPage:1\r\n                    }\r\n\r\n\r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\ntype SetIsFriend = {\r\n    type:typeof SET_IS_FRIEND\r\n    isFriend:boolean\r\n}\r\n\r\nexport let setIsFriendAC = (isFriend:boolean):SetIsFriend => {\r\nreturn{\r\n    type:SET_IS_FRIEND,\r\n    isFriend\r\n}\r\n}\r\n\r\ntype SetTerm = {\r\n    type: typeof SET_TERM\r\n    term:string\r\n}\r\n\r\nexport let setTermAC = (term:string):SetTerm=>{\r\n    return{type:SET_TERM,\r\n        term\r\n    }\r\n}\r\n\r\n\r\n\r\ntype FollowSuccessType = {\r\n    type: typeof FOLLOW\r\n    userId: number\r\n}\r\n\r\nexport let followSuccess = (userId: number): FollowSuccessType => {\r\n    return {\r\n        type: FOLLOW,\r\n        userId\r\n    }\r\n}\r\n\r\n\r\ntype unfollowSuccessType = {\r\n    type: typeof UNFOLLOW\r\n    userId: number\r\n}\r\n\r\nexport let unfollowSuccess = (userId: number): unfollowSuccessType => {\r\n    return {\r\n        type: UNFOLLOW,\r\n        userId\r\n    }\r\n}\r\n\r\n\r\ntype SetUsersType = {\r\n    type: typeof SET_USERS\r\n    users: Array<UserType>\r\n}\r\n\r\nexport let setUsers = (users: Array<UserType>):SetUsersType => {\r\n    return {\r\n        type: SET_USERS,\r\n         users\r\n    }\r\n}\r\n\r\n\r\n\r\ntype setCurrentPageType = {\r\n    type : typeof SET_CURRENT_PAGE\r\n    page:number\r\n}\r\n\r\nexport let setCurrentPage = (page: number):setCurrentPageType => {\r\n    return {\r\n        type: SET_CURRENT_PAGE,\r\n         page\r\n    }\r\n}\r\n\r\n\r\ntype setTotalUsersCountType = {\r\n    type: typeof SET_TOTAL_USER_COUNT\r\n    newTotalUsersCount: number\r\n}\r\n\r\nexport let setTotalUsersCount = (newTotalUsersCount: number):setTotalUsersCountType => {\r\n    return {\r\n        type: SET_TOTAL_USER_COUNT,\r\n         newTotalUsersCount\r\n    }\r\n}\r\n\r\n\r\ntype toggleIsFetchingType = {\r\n    type : typeof TOGGLE_IS_FETCHING\r\n    isFetching:boolean\r\n}\r\n\r\nexport let toggleIsFetching = (isFetching: boolean):toggleIsFetchingType => {\r\n    return (\r\n        { type: TOGGLE_IS_FETCHING,\r\n             isFetching \r\n            }\r\n    )\r\n}\r\n\r\n\r\n\r\ntype toggleIsFollowingProgressType = {\r\n    type : typeof TOGGLE_IS_FOLLOWING_PROGRESS\r\n    check:boolean\r\n    id:number\r\n}\r\n\r\n\r\nexport let toggleIsFollowingProgress = (check: boolean, id: number):toggleIsFollowingProgressType => {\r\n    return (\r\n        { type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n             check,\r\n              id \r\n            }\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const getUsers = (currentPage: number, pageSize: number, isFriend:boolean, userName:string) => {\r\n    return (\r\n        (dispatch: any) => {\r\n            dispatch(toggleIsFetching(true))\r\n            usersAPI.getUsers(currentPage, pageSize, isFriend, userName)\r\n                .then(dataResponse => {\r\n                    dispatch(toggleIsFetching(false))\r\n                    dispatch(setUsers(dataResponse.items))\r\n                    dispatch(setTotalUsersCount(dataResponse.totalCount))\r\n                })\r\n        }\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport const follow = (userId: number) => {\r\n    return (\r\n        (dispatch: any) => {\r\n            dispatch(toggleIsFollowingProgress(true, userId))\r\n            usersAPI.follow(userId).then((resultCode) => {\r\n                if (resultCode === 0) { dispatch(followSuccess(userId)) }\r\n                dispatch(toggleIsFollowingProgress(false, userId))\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\n\r\n\r\nexport const unfollow = (userId: number) => {\r\n    return (\r\n        (dispatch: any) => {\r\n            dispatch(toggleIsFollowingProgress(true, userId));\r\n            usersAPI.unfollow(userId).then((resultCode) => {\r\n                if (resultCode === 0) { dispatch(unfollowSuccess(userId)) }\r\n                dispatch(toggleIsFollowingProgress(false, userId))\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default usersReducer;\r\n","import React, { useState, useEffect } from \"react\"\r\nimport style from \"./Users.module.css\"\r\n\r\n\r\n\r\n\r\n\r\nlet UserSearchTab = (props) => {\r\n    /* \r\n    let [topMargin, setTopMargin] = useState()\r\n\r\n    useEffect(() => {\r\n        try{setTopMargin(props.paginatorDiv.current.clientHeight) \r\n            window.addEventListener('resize', ()=>{setTopMargin(props.paginatorDiv.current.clientHeight)});\r\n    }\r\n        \r\n    catch(e){console.log(props.paginatorDiv)}\r\n        return () => {\r\n            window.removeEventListener('resize', ()=>{setTopMargin(props.paginatorDiv.current.clientHeight)}); }\r\n    }, []) */\r\n\r\n\r\n\r\n    return(\r\n        <div className={style.searchTab}    style={{top:`47px`}}>\r\n\r\n        <input placeholder='User name' value={props.term} onClick={(e)=>{e.stopPropagation();}}\r\n        onChange={(e)=>{ props.setTermAC(e.currentTarget.value)}}   ></input>\r\n\r\n        <div className={style.searchIsFriend}>\r\n            <label  onClick={(e)=>{e.stopPropagation(); props.hideOpenSearchTab(!props.searchTab); props.setIsFriendAC(null)}} >\r\n                <input  type=\"radio\" name=\"isFriend\" value=\"isFriend\" defaultChecked={props.isFriend==null?true:false} />\r\n                <span>   All</span>\r\n            </label>\r\n            <label  onClick={(e)=>{e.stopPropagation(); props.hideOpenSearchTab(!props.searchTab);  props.setIsFriendAC(true)}} >\r\n                <input type=\"radio\" name=\"isFriend\" value=\"isFriend\" defaultChecked={props.isFriend===true?true:false}/>\r\n                <span>   friends</span>\r\n            </label>\r\n            <label   onClick={(e)=>{e.stopPropagation(); props.hideOpenSearchTab(!props.searchTab);  props.setIsFriendAC(false);}}  >\r\n                <input type=\"radio\" name=\"isFriend\" value=\"isFriend\"  defaultChecked={props.isFriend===false?true:false}/>\r\n                <span>   Not Friends</span>\r\n            </label>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default UserSearchTab","import React, { useRef } from 'react';\r\nimport { useState } from 'react';\r\nimport preloadGif from '../../assets/images/loader.gif'\r\nimport style from \"./Users.module.css\"\r\nimport UserSearchTab from './UserSearchTab';\r\n\r\n\r\nlet Paginator = ({ portionSize, totalUsersCount, pageSize, setCurrentPage,\r\n    currentPage, isFetching, getUsers, setIsFriendAC, setTermAC, term, isFriend }) => {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \r\n\r\n    let [searchTab, hideOpenSearchTab] = useState(false)\r\n    let paginatorDiv = useRef();\r\n\r\n\r\n    let totalPagesCount = Math.ceil(totalUsersCount / pageSize);\r\n    let totalPortionsCount = Math.ceil(totalPagesCount / portionSize);\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n    let rightPortionPageNumber = portionNumber * portionSize\r\n\r\n    let pagesArray = [];\r\n    for (let i = 1; i <= totalPagesCount; i++) {\r\n        pagesArray.push(i);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={style.paginator} ref={paginatorDiv}>\r\n            <div className={style.pageNumbers}>\r\n                {portionNumber > 1 &&\r\n                    <button className={style.buttonPrev} onClick={() => { setPortionNumber(portionNumber - 1) }} ></button>}\r\n\r\n\r\n                {pagesArray.filter((page) => { return (page >= leftPortionPageNumber && page <= rightPortionPageNumber) }).map(\r\n                    (page) => {\r\n                        return <span key={page}\r\n                            onClick={(e) => { setCurrentPage(page) }}\r\n                            className={currentPage === page ? style.activePage : style.notActivePage}>\r\n                            {isFetching && currentPage === page ? <img src={preloadGif} alt=\"preloader\" ></img> : page}\r\n                        </span>\r\n                    })\r\n                }\r\n\r\n                {portionNumber < totalPortionsCount &&\r\n                    <button className={style.buttonNext} onClick={() => { setPortionNumber(portionNumber + 1) }} ></button>}\r\n\r\n            </div>\r\n\r\n\r\n\r\n{/* <div className={style.searchDescription}>{isFriend && \"Friends\"}</div> */}\r\n\r\n\r\n            <div className={style.userSearchButton}  onClick={()=>{hideOpenSearchTab(!searchTab)}} ></div> \r\n\r\n{searchTab && \r\n<UserSearchTab\r\ngetUsers = {getUsers}\r\npageSize = {pageSize}\r\ncurrentPage={currentPage}\r\nsetIsFriendAC = {setIsFriendAC}\r\nsetTermAC = {setTermAC}\r\nterm = {term}\r\nsearchTab = {searchTab}\r\nhideOpenSearchTab = {hideOpenSearchTab}\r\nisFriend={isFriend}\r\npaginatorDiv={paginatorDiv}\r\n/>\r\n}\r\n\r\n \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Paginator","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport userThumbnail from '../../assets/images/user.jpg';\r\nimport style from \"./Users.module.css\";\r\n\r\n\r\n\r\nlet User = ({ user, following_unfollowingIds, unfollow, follow }) => {\r\n\r\n    return (\r\n        <div className={style.ussers_container}>\r\n\r\n            <div className={style.usser_icon}>\r\n                <div className={style.wrapper__for_AspectRatio}>\r\n                    <div className={style.imgAspectRatio_wrapper}>\r\n                        <div className={style.img_wrapper}>\r\n                            <NavLink to={\"/profile/\" + user.id}>\r\n                                <img src={user.photos.large ? user.photos.large : userThumbnail} alt=\"avatar\" />   {/* if there is a photo use that photo if not use aa photo from import */}\r\n                            </NavLink>\r\n                        </div>\r\n                    </div>\r\n                    <div className={style.button_wrapper}>  ....Subscribe....\r\n                        {user.followed\r\n                            ? <button disabled={following_unfollowingIds.some((id) => { return (id === user.id) })} onClick={() => {\r\n                                unfollow(user.id);\r\n                            }}>   Unfollow  </button>\r\n\r\n\r\n\r\n                            : <button disabled={following_unfollowingIds.some((id) => { return (id === user.id) })} onClick={() => {\r\n                                follow(user.id);\r\n                            }}>   follow  </button>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={style.user_info}>\r\n                <div className={style.name_and_status}>\r\n                    <div className={style.name}>{user.name}</div>\r\n                    <div className={style.status}>{user.status ? user.status : \"I am lazy and do not have a status\"}</div>\r\n\r\n                </div>\r\n                <div className={style.country_and_city}>\r\n                    <div className={style.country}>{\"user.location.country\"}</div>\r\n                    <div className={style.city}>{\"user.location.city\"}</div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default User\r\n","import React from 'react';\r\nimport Paginator from './Paginator';\r\nimport User from './User';\r\nimport style from \"./Users.module.css\";\r\n\r\n\r\nlet Users = (props) => {\r\n    let totalPagesCount = Math.ceil(props.totalUsersCount / props.pageSize);   /* here we calculate how many pages we will need, Math.ceil() rounds to the bigger integer  */\r\n\r\n    let pagesArray = [];\r\n    for (let i = 1; i <= totalPagesCount; i++) {\r\n        pagesArray.push(i);\r\n    }\r\n\r\n\r\n    return (\r\n\r\n        <div className={style.wrapper}>\r\n\r\n            <Paginator totalUsersCount={props.totalUsersCount}\r\n                portionSize={props.portionSize}\r\n                pageSize={props.pageSize} setCurrentPage={props.setCurrentPage}\r\n                currentPage={props.currentPage}\r\n                isFetching={props.isFetching}\r\n                getUsers = {props.getUsers}\r\n                setIsFriendAC = {props.setIsFriendAC}\r\n                setTermAC = {props.setTermAC}\r\n                term={props.term}\r\n                isFriend={props.isFriend}\r\n            />\r\n\r\n\r\n            {props.users.map(u => {\r\n                return (<User key={u.id} user={u}\r\n                    following_unfollowingIds={props.following_unfollowingIds} unfollow={props.unfollow} follow={props.follow}\r\n                />)\r\n            })}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Users\r\n\r\n\r\n// the specific button renders on the base of the property u.followed (aether it is follow or unfollow ) then when we press the button\r\n// this particular user id gets in to followingInProgress array in state then sends server request to subscribe or unsubscribe. While server\r\n// request is in progress we rerender our users - and we check each (follow/unfollow) button if it is in followingInProgress array -\r\n//if it means that request is still in process and button gets disabled. When server request resolved it changes user property followed\r\n// and removes user.id from the followingInProgress array - so the button changes to opposite and becomes enabled\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* my new Class component! */\r\n/* \r\n#1 You create a class and you required to extend from React.Component\r\n\r\n#2 the constructor function is invokes only first time when the component object is born, any rerendering do not invoke constructor\r\nbut invoke render() function. when you go to another component - this component object kills. and next time when you visit this \r\ncomponent it will born again.\r\n\r\n#3 by the default constructor has to pass props to the React.Component's constructor (if he does only that, then you do not have to \r\n    write constructor at all, it will happen automatically), but if you add some variables to the class object, or you want him\r\n    to do something only once when he is born, you have to write constructor, as in this sample\r\n\r\n#4 Each class requires to have render function, which requires to return jsx.\r\n\r\n#5 each additional function you want to create you have to create like this:   \r\nfunctionName = ()=>{}\r\n\r\n*/","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getCurrentPage, getFollow_unfollowUserIds, getIsFetching, getPageSize, getUsersCount, getUsersSuperReselector } from \"../../Redux/user-selector\";\r\nimport { setTermAC, setIsFriendAC, follow, getUsers, setCurrentPage, setTotalUsersCount, setUsers, toggleIsFetching, toggleIsFollowingProgress, unfollow } from \"../../Redux/users-reducer\";\r\nimport Users from \"./Users\";\r\n\r\n\r\n\r\n\r\nclass UsersContainerComponent extends React.Component {\r\n    /* since we do not make a request from the constructor, and constructor only sends props to his parent constructor at React.Component, we may not write our constructor - it will do its work automatically   */\r\n\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize, this.props.isFriend, this.props.term);\r\n    }\r\n \r\n     componentDidUpdate(prevProps, prevState, snapshot){\r\n     if (this.props.term !== prevProps.term | this.props.isFriend !== prevProps.isFriend){\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize, this.props.isFriend, this.props.term);\r\n     }\r\n    }  \r\n\r\n    setCurrentPage = (page) => {\r\n        this.props.setCurrentPage(page);\r\n        this.props.getUsers(page, this.props.pageSize, this.props.isFriend, this.props.term);\r\n    }\r\n\r\n    render = () => {\r\n\r\n        return (\r\n            <>\r\n                {/* {this.props.isFetching ? <Preloader /> : null}  */}\r\n\r\n                <Users\r\n                getUsers ={this.props.getUsers}\r\n                    setCurrentPage={this.setCurrentPage}\r\n                    totalUsersCount={this.props.totalUsersCount}\r\n                    pageSize={this.props.pageSize}\r\n                    portionSize={this.props.portionSize}\r\n                    users={this.props.users}\r\n                    currentPage={this.props.currentPage}\r\n                    follow={this.props.follow}\r\n                    unfollow={this.props.unfollow}\r\n                    toggleIsFollowingProgress={this.props.toggleIsFollowingProgress}\r\n                    following_unfollowingIds={this.props.following_unfollowingIds}\r\n                    isFetching={this.props.isFetching}\r\n                    setIsFriendAC = {this.props.setIsFriendAC}\r\n                    setTermAC={this.props.setTermAC}\r\n                    term={this.props.term}\r\n                    isFriend={this.props.isFriend}\r\n                />\r\n\r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsersSuperReselector(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        following_unfollowingIds: getFollow_unfollowUserIds(state),\r\n        portionSize: state.usersPage.portionSize,\r\n        isFriend:state.usersPage.isFriend,\r\n        term:state.usersPage.term\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, {\r\n    getUsers,\r\n    follow,\r\n    unfollow,\r\n    setUsers,\r\n    setCurrentPage,\r\n    setTotalUsersCount,\r\n    toggleIsFetching,\r\n    toggleIsFollowingProgress,\r\n    setIsFriendAC,\r\n    setTermAC\r\n}\r\n)(UsersContainerComponent);","import { authenticate } from \"./Auth\"\r\nconst INITIALIZED_SUCCESS = \"INITIALIZED_SUCCESS\"\r\n\r\n\r\ntype InitialStateStateType = {\r\n    initialized: boolean\r\n}\r\n\r\nlet initialState:InitialStateStateType = {\r\n    initialized: false,\r\n}\r\n\r\n\r\nconst appReducer = (state:InitialStateStateType = initialState, action:any):InitialStateStateType => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return ({\r\n                ...state,\r\n                initialized: true,\r\n            })\r\n\r\n\r\n        default: return state\r\n    }\r\n}\r\n\r\n\r\n\r\ntype initializedSuccessActionType = {\r\n    type: typeof INITIALIZED_SUCCESS\r\n}\r\n\r\nexport const initializedSuccess = ():initializedSuccessActionType => { return ({ type: INITIALIZED_SUCCESS }) }\r\n\r\n\r\nexport const initializeApp = () => {\r\n    return (\r\n        (dispatch:any) => {\r\n            let promise = dispatch(authenticate())  /* we have to dispatch this thunk, with dispatch method! */\r\n            promise.then(() => { dispatch(initializedSuccess()) })\r\n        }\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default appReducer","\r\n\r\n\r\ntype FriendDataType ={\r\n    id:number\r\n    name:string|null\r\n    picture:string|null\r\n}\r\n\r\n\r\nlet initialState = {\r\n    friendData: [\r\n        { id: 1, name: \"Vector Sohunaishvily\", picture: \"https://www.illumination.com/wp-content/uploads/2019/11/DM1_Vector.png\" },\r\n        { id: 2, name: \"Felonious Gru\", picture: \"https://static.wikia.nocookie.net/heroes-and-villians/images/7/7e/Gru.png\" },\r\n        { id: 4, name: \"Marlena Gru\", picture: \"https://static.wikia.nocookie.net/heroes-and-villians/images/4/4c/Screenshot_2016-03-21-20-42-19-1.png\" },\r\n        { id: 5, name: \"Margo Gru \", picture: \"https://static.wikia.nocookie.net/despicableme/images/0/02/Margo_Posing.png\" },\r\n        { id: 6, name: \"Mr. Perkins\", picture: \"https://s3.amazonaws.com/intanibase/iad_characters/966.jpg\" },\r\n    ] as Array<FriendDataType>\r\n}\r\n\r\n\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n\r\nconst sidebarReducer = (state:InitialStateType = initialState, action:any):InitialStateType => {\r\n    return state;\r\n}\r\n\r\n\r\nexport default sidebarReducer;","/* #1 we install Redux and create redux-store.js */\r\nimport { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport authReducer from \"./Auth\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\"\r\nimport {reducer as fromReducer}from 'redux-form'\r\nimport appReducer from \"./app-reduces\";\r\nimport headerReducer from \"./header-reducer\";\r\n\r\n\r\n/*#4 implementing reducers to Redux */\r\nlet reducers = combineReducers({       \r\n    dialogsPage:dialogsReducer,\r\n    myPostsPage:profileReducer,\r\n    navBarPage:sidebarReducer,\r\n    usersPage:usersReducer, \r\n    auth:authReducer,               /* it means that this part of code will be in the state like: an object usersPage and inside this object i will have things what i have in the initialState - so an array users. */\r\nform:fromReducer,\r\napp:appReducer,\r\nheader : headerReducer\r\n})\r\n\r\n\r\n\r\n/*#5 inserted reducers to store */\r\n/* let store = createStore(reducers, applyMiddleware(thunkMiddleware) );*/\r\n\r\n/* this is the way to enable Redux DevTools */\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers( applyMiddleware(thunkMiddleware)));\r\n\r\n\r\nexport default store;\r\n\r\n\r\nwindow.__store = store;","import React from 'react';\r\nimport { BrowserRouter, Navigate, Route, Routes } from 'react-router-dom';\r\nimport './App.css';\r\nimport NavBar from './Components/Nav-bar/Nav_bar.jsx';\r\nimport Settings from './Components/Settings/Settings';\r\n\r\nimport { connect, Provider } from 'react-redux';\r\nimport Preloader from './Components/common/preloader/Preloader';\r\nimport HeaderContainer from './Components/Header/HeaderContainer';\r\nimport { LoginConnect } from './Components/Login/Login';\r\nimport UsersContainer from './Components/Users/UsersContainer';\r\nimport { initializeApp } from './Redux/app-reduces';\r\nimport { showGlobalError } from './Redux/profile-reducer';\r\nimport store from './Redux/redux-store';\r\n\r\n//import ProfileContainer from './Components/Profile/ProfileContainer';\r\n//import DialogsContainer from './Components/Dialogs/DialogsContainer';\r\nconst ProfileContainer = React.lazy(() => import(\"./Components/Profile/ProfileContainer\"))  // the way to import components lazily\r\nconst DialogsContainer = React.lazy(() => import(\"./Components/Dialogs/DialogsContainer\"))\r\n\r\nclass App extends React.Component {\r\n\r\n  catchAllUnhandledErrors = (reason, promise) => {\r\n    //console.log(\"the alert in App.js\"+reason)\r\n    this.props.showGlobalError()\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.props.initializeApp();\r\n    window.addEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors) // handle any rejection from the server\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    window.removeEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors)\r\n  }\r\n\r\n  render = () => {\r\n    if (!this.props.initialized) {\r\n      return <Preloader />\r\n    }\r\n\r\n\r\n    return (\r\n      <div className=\"AppWrapper\">\r\n        <HeaderContainer />\r\n        <div className=\"App\">\r\n          <BrowserRouter basename={process.env.PUBLIC_URL}  >         {/* this the way we work with routing: inside our main div wrapper we create a tag <BrowserRouter> this tag we create once for an app, and then for each variant of the path we create separate attribute <Route> all the path's togethers have to be wrapped in to attribute <Routes> */}\r\n            <NavBar />\r\n            <div className=\"body_wrapper\">\r\n              <Routes>\r\n\r\n                <Route path=\"/dialogs/*\" element={\r\n                  <React.Suspense fallback={<div>{\"React.lazy is working\"}</div>}>\r\n                    <DialogsContainer />\r\n                  </React.Suspense>\r\n                } />\r\n\r\n                <Route path=\"/profile/*\" element={\r\n                  <React.Suspense fallback={<div>{\"React.lazy is working\"}</div>}>\r\n                    <ProfileContainer />\r\n                  </React.Suspense>\r\n                } />\r\n\r\n\r\n                <Route exact path=\"/\" element={<Navigate to={`/profile/${this.props.authorizedId}`} />} />    {/* this is the way to render profile if your url is empty */}\r\n\r\n                <Route path=\"/settings/*\" element={<Settings />} />\r\n\r\n                <Route path=\"/users/*\" element={<UsersContainer />} />\r\n\r\n                <Route path=\"/login/*\" element={<LoginConnect />} />\r\n\r\n                <Route path=\"*\" element={<div>404 NOT FOUND</div>} />   {/* this is the way to render something, when the current url does not match any path */}\r\n\r\n              </Routes>\r\n            </div>\r\n          </BrowserRouter>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n\r\nlet BaseAppComponent = (props) => {\r\n  return (\r\n    <React.StrictMode>\r\n      <Provider store={store}>\r\n        <ConnectAppContainer />\r\n      </Provider>\r\n    </React.StrictMode>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport let mapStateToProps = (state) => {\r\n  return {\r\n    initialized: state.app.initialized,\r\n    authorizedId: state.auth.id,\r\n  }\r\n}\r\n\r\n\r\nlet ConnectAppContainer = connect(mapStateToProps, { initializeApp, showGlobalError })(App);\r\n\r\n\r\nexport default BaseAppComponent\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport BaseAppComponent from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <BaseAppComponent/>,\r\n    document.getElementById('root')\r\n  );\r\n\r\n\r\nreportWebVitals();\r\n\r\n\r\n\r\n\r\n\r\n/*############# EVERY LESSON SUMMARY:\r\nLesson#96\r\nUploading the picture to the App\r\n - First thing is write the logic which will check if you are the owner of the page ( if you are the owner  => show the button to \r\nchange the profile picture). To upload the file there is a special <input type={\"file\"}><input>.  then write the pipeline: (thunk => \r\n  api => action creator => case in reducer => callback to the component to call thunk ) \r\n\r\nLesson#92\r\nComponent testing:\r\n- I had to move Provider and React.StrictMode to the BaseAppComponent in case to be able to test components,\r\n because I need ReactDOM.render() function to expect only one component, not the whole bunch of components. So I have to create that start \r\n component which will have Provider with the store and Browser Router... and everything what needs to run the app. And now I am able to pass\r\n just one start component BaseAppComponent when I will need to test the whale app.\r\n\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n<Provider store={store}>       \r\n<App />\r\n</Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n  );\r\n\r\n\r\nLesson#83\r\nImplemented library reselect\r\nSelector is a function what expects whole global state, takes from it some piece  and returns that particular piece of state\r\nWe create primitive selector which does nothing but extracts needed us piece of state from global state. We call those selectors\r\n - dependences - because the state they extract will be determining if we will call main reselect.\r\n#2 create main reselect function with the help of createSelector() method what returns selector. That method expects dependences-\r\n(primitive selectors) and callback with main selecting logic. the callback gets in his parameters the return from each dependence selector (which is piece of state), and calculation happens on that piece of state.\r\n\r\n\r\nLESSON#80\r\nissue: when you press on the button messages and then press reload : you load the header then header make auth server request, \r\nyou load the messages, but the server request did not get back yet (it is asynchronous), so messages redirect you to the Login page - you\r\n get to the login page but then your request gets back and isAuth becams true and Login page redirects you to the Profile page. That glitch \r\n happens because of the delay of the data we receive. we rerendering pages with information, which is not full (because when we press reload\r\n  we make auth request, but auth request takes time to be executed, because it is server request) that is why first browser tries to render dialogs\r\n  then he sees that user is not authorized, because request is still going - he sends us to the login, then we receive response from server\r\n   isAuth becomes true and login page moves us to the profile.\r\nTo fix that - we have to prevent anything from rendering until we doing authentication\r\nfor that the component app will be responsible to wait and show us preloader until authentication is going - for that we have to use promises and\r\nmethod then and also set a variable \"marker\" which will get true when authentication is finished  with no matter user authorized or not\r\n(for that we have to change the marker from true to false only when all the async authentication requests finished and we received response.\r\n  just execute the function which changes the \"marker\" last in the method .then)\r\n\r\n - change functional app.js to class component\r\n - remove authorization from the HeaderContainer\r\n - create app-reducer.js\r\n - invoke authenticate function from auth-reducer in the thunk of app-reducer (initializeApp) : ror that we have to return our promise (in the authenticate\r\n   function it is the server request - so just return the whole server request)\r\n - let that request to execute and then in the method .then call another function which will change your marker  in app-reducer to true .  \r\n !!! remember each method then   returns a promise\r\n - in the app component in componentDidMount invoke initializeApp() and in the render method set if statement which will check the marker and\r\n will show the preloader in marker is false\r\n\r\n \r\n\r\n\r\nLESSON#79 how to show error from the server response\r\n- whenever you send server request to login - you  may succeed or fail depends of the data (login, password) you specified.\r\nSo if you succeed the server will return resultCode === 0 but if you failed the resultCode !=0\r\n- the response from server you receive in your thunk -  if(resultCode === 0){...}  else {you code to handle the failure}\r\n- if your component made from redux-form => you may handle the failure and show user that something is wrong by method stopSubmit()\r\n- aas the arguments you have to specify what is the name of your redux-form (you can get this name from  const LoginReduxForm = reduxForm({form:'login'})(LoginForm))\r\nand the second parameter is the Field name in your redux-form and what message you want to send to that field (the field is a tag or your upgraded\r\n  component) will receive this message in props.meta.error. \r\n  - instead of sending this info to a field you can sand it to the wholl form as a common error, for that just specify at the field name (_error)\r\n- dispatch(stopSubmit(\"login\", {_error:message}))\r\n\r\nLesson#77  Redux-Form validators:\r\n- to add a validator to redux-from first you have to  create a function Validator, this function receives input and returns undefined if everything\r\nis ok or returns a string with an error message if the value is invalid {you specify it with logic}.\r\n- then you can import your validators in to the file with your form and pass it as a parameter to attribute \"validate={[validator,]}\" to\r\nto corresponding field you want to validate. your form will automatically deny submitting if the input is invalid.\r\n- to be able to do any UI changes with the errors - you have to pass the validators not to regular attribute \"component='input'\" but you\r\nhave to create your custom component and pass everything to it <Field component={MyInput} name=\"postText\" placeholder:\"message\"/>\r\n-  MyInput will receive props which will include : input, meta, ...otherProps.   input - has validators and other functions inside itself,\r\nmeta contains all the information about this field: touched, error ... and otherProps contains placeholder and other not very important props.\r\n - all that information you have to pass to the actual tag you will be render, but you can sat css for that tag depending on the changes in \r\n your field, what validators will return. remember each time you change something redux-form rerender component.\r\n\r\n\r\nLESSON#75   REDUX-FORM\r\n- npm install redux-form\r\n- create login page with form in a separate component\r\n- import redux form reducer in to our store  (import {reducer as formReducer} from 'redux-form')\r\n         let reducers = combineReducers({reducer1:..., form:formReducer})\r\n- wrap LoginForm component into Redux-form HOC\r\n- all the input tags change to <field></field> add to each of them attribute \"component=\"input\"\" what will\r\n     specify what kind of tag you want to render, also add to each of them attribute \"name\"\r\n- set eventListener <form onSubmit={props.handleSubmit}>...</form>, and create a method onSubmit=(whichReceivesData)=>{},\r\n in a component what renders React-form HOC  and pass this method through props to React-form HOC  \r\n\r\n\r\nLESSON#73\r\nIMPORTANT: response from put request on profile/status does not return updated status - it just set it at the server but does not return it to you,\r\nin response. you have to set your global state from the argument (status) you receive to your thunk !!!\r\n\r\n- create pipeline to getStatus.; create pipeline to setStatus.\r\nthe span in Profile status has to get value fro the global state,\r\nthe input has to get the value from local state. when input onBlur he has to change the global state and change the status on the server\r\n\r\n\r\nLESSON#71  CREATING THE LOCAL STATE\r\n- the  local state you can create only for a class component. Because class component creates an object what can have some properties, \r\nand functional component you can only invoke, execute, but can not add properties\r\n- to change the state you have to use a method this.SetState - this method is asynchronous (keep that in mind, they can ask you at interview)\r\nand this method will rerender the page after changing thew local State. \r\n\r\n\r\nLESSON#69 HOC\r\n- HOC is a function, what expects an argument - component.creates the containerComponent with some functionality and the renders inner component\r\ntis way our inner component receives functionality been wrapped in a containerComponent with functionality.\r\n- HOW TO PERFORM IT?\r\n- create a function in a separate file. src->HOC->withAuthRedirect this function should expect a component as an argument and be exported,\r\n- inside the function create class component which will have needed functionality and will render received function at the end.\r\n- also if you need to get some state or dispatch use function connect inside the function withAuthRedirect and pass to connect your class component\r\n- then just return result of connect out from the function withAuthRedirect.\r\n- then at the file where you call this function withAuthRedirect you will receive : let WithRedirect = withAuthRedirect(Component)\r\n1. the class component with some props, what connect function returns: withRedirectConnectClassComponent\r\n2. inside that withRedirectConnectClassComponent we will get our HOCClassContainer what we wrote in  the function withAuthRedirect\r\n3. HOCClassContainer inside will have our component which needs to be rendered\r\n- then all this package (WithRedirect) we put in our main connect as a component.\r\nso here is the pipe line who renders whom.:\r\n-mainConnect->withRedirectConnectClassComponent->HOCClassContainer->Component\r\n\r\n- it could be more components, the one rule : you insert your HOC in the main connect and then do the render in whatever sequence you like \r\n\r\n\r\nLESSON#68   REDIRECT (NAVIGATE)\r\n- to redirect user from some page to another:  inside the functional component before return write a check\r\n- and as a result of this check render a component with tag navigate and to (path) the component you want to redirect to:\r\nif(props.isAuth===false){return<Navigate to={\"/login\"}/>}\r\n\r\n- what we did : is we get a property isAuth from auth-reducer (this property is true when we signed in and is false when we did not sign in)\r\nand send this property through mapSStateToProps to functional component. and then inside functional component before return check this property\r\nand redirect if it is false\r\n\r\nLESSON#66      THUNK\r\n- create thunk function in user-reducer.js \r\n- in to that thunk copy everything from the usersContainer=>componentDidMount\r\n - substitute all the props to dispatch.\r\n -wrap the thunk in getUsersThunkCreator - it will receive the parameters and return thunk\r\n - install middleware \"npm i redux-thunk\"\r\n import thunkMiddleware from \"redux-thunk\" in to redux-store.js file\r\n  - insert  applyMiddleware (thunkMiddleware) in redux createStore to enable to dispatch not only objects action, but also functions\r\n  -  import thunkCreator to the usersContainer and invoke it sending needed parameters to it\r\n  - in connect:\r\n  connect(stateDispatchToProps,{getUsersThunkCreator:(currentPage,PageSize)=>{dispatch(getUsersThunkCreator(currentPage,PageSize))}})\r\n  so the connect returns us a callback, when we invoke the function getUsersThunkCreator in th usersContainer we first invoke thunkCreator, it will return\r\n  us function and then we dispatch function, the function will get to dispatch and dispatch will see that this is the function, so he will \r\n  understand that this is thunk and will invoke the function dispatching all the subfunctions,  subfunctions are action creators, so we invoke them, they return \r\n  actions, actions will dispatch to reducer and change the state, component will rerender... and our thunk will continue to invoke the functions\r\n  down the road\r\n\r\n  - create thunk for render, follow, unfollow\r\n  - homework  substitute to thunk all the other axios requests\r\n\r\n\r\n\r\n\r\nLESSON#64 buttons follow/unfollow disabled during a server request to follow or unfollow\r\n- start from business logic: create an array in the initialState (following_unfollowingIds)\r\n- Think about a logic... you render your page : you have to check something to decide if you want to disable the button or not.\r\n: each time we press the button, before server request, we can set the flag property to true and add a current u.id to the \r\nfollowing_unfollowingIds in the initialState.  then the page will rerender and we can determin if we want to disable this button by checking\r\nif we have current u.id in the following_unfollowingIds - if it has - then disable the button.  Then in a stack que will go server request, after\r\n we will receive response and in the response we will change the flag to false and will remove u.id from the following_unfollowingIds, so when\r\n react will rerender the next time he will not find this u.id and will make the button available.\r\n   to check for matching id use method some(). to remove needed id use method filter() in the reducer\r\n   - create the pipeline to change the flag and add and remove users id\r\n\r\nLESSON#63\r\nENCAPSULATING SERVER REQUESTS IN TO DAL - data access layer. \r\n- create api folder. create api.js file in that folder\r\n- from UserContainer class=> method componentDidMount take axios request and move it to api.js\r\n- in the api.js create a function (call it getUsers) which will be returning axios request, export this function\r\n- import getUsers function to UsersContainer and call method then     getUsers.then\r\n- from the place where you invoke getUsers(parameters) send him all needed parameters \r\n- instead of using url each time for axios request substitute it with axios instance\r\n- put getUsers in to an object usersAPI to keep everything in order \r\n- CHECK HOW TO ENCAPSULATE SERVER REQUESTS IN api.js file\r\n\r\nLESSON#62\r\n remember you have to be logged in the dimich website, to enable cookies\r\n we have to send request been authorized to be able to use cookies. so send requests post to follow and delete to unfollow\r\n - all the server requests, except get, required to have exes key  \r\n - you have to add headers to server request. header you should write at the same object as cookie request  (our headers will be exes key)\r\n - add cookies to the server requests in UsersContainer class\r\n\r\nLESSON#61\r\n - create HeaderContainer and make axios request to authenticator end point.  \r\n  - to be able to authenticate you have to log in to DIMICH website: https://social-network.samuraijs.com  this way you save cookies in to your system\r\n  - to be able to authenticate with cookies add a second parameter to axios request {withCredentials:true}\r\n  - get from response 3 variables: id, email, login\r\n  - create the whole pipeLine to dispatch those 3 variables (create reducer, dispatch, AC, insert your reducer in to store, use it in HeaderContainer)\r\n  - in the authorization reducer initialState should be also isAuth variable to check if you authorized.\r\n  - send to the Header props and  check if you received props.login then display the name of a user. if not - just a link\r\n\r\nLESSON#60\r\n -instead of withRouter I used useMatch (it returns the same staff like withRouter) except you have to apply that function only in function component\r\n -so I had to create an function component, what will check the URL for userId (that what we specify in the arguments for the function) and then\r\n render class component.\r\n  -first executes function connect, rendering ProfileMatchComponent and then executes function ProfileMatchComponent rendering ProfileContainer\r\n  - inside class ProfileContainer we check if we received something in \"match\"  if yes we assign our userId to it, if not - we assign our userId to Dimich\r\n  id number = 2.   and then do server request with proper id address\r\n\r\nLESSON#59\r\n- created  ProfileContainer component\r\n- implement behavior: press on one of the users and it opens a user information in the ProfileInfo component (for now I do not know how to get particular user)\r\n- in the ProfileContainer component happens axios get request to get a user information. implemented a pipeLine to assign a user from server\r\nrequest to a parameter in a state: userProfile\r\n-in the ProfileInfo.js implemented alternative return (alternative rendering component), it is like an alternative exit from the function \r\nwhen we did not receive props yet then do not render the page!\r\n- created \"window.store = store\" the object window creates a new variable named store and assign this variable to our store. now we can get to know\r\nwhat our store is from any point of the app!    \r\n\r\nLESSON#58\r\n- we removed mapDispatchToProps function from UsersContainer.js component\r\n- moved all the Action Creators in the object and put it directly in to the context\r\n parameters on the place of mapDispatchToProps.\r\n - we renamed our Action Creators to be able to assign shortly in the object \r\n\r\nLESSON#57  adding preloader gif\r\n- create separate functional component Preloader.jsx which will return image.gif\r\n- create a variable 'isFetching' in users-reducer.js => initial state. set it to boolean true \r\n- create pipeline to change isFetching from true to false and back.\r\n- inside the UsersContainer class in the return of function render. specify ternary expression\r\nisFetching? <Preloader/>:null \r\n- then you have to manipulate isFetching : you have to show the preloader while\r\nserver request is going, and finish showing it, when fetching is finished: it\r\nmeans change isFetching to true before server request and right after you got the\r\nresponse set isFetching to false\r\n\r\n\r\nLESSON# 56\r\n- moved class component to the UsersContainer - now class component will be responsible only for server requests\r\n- created functional component, sent all the props to it, now this functional\r\n component is responsible for returning jsx\r\n\r\nLESSON #55\r\n  -in Users.js => moved axios request from the constructor to componentDidMount(){}, removed constructor\r\n  -users-reducer.js=> added to state variables: pageSize, totalUserCount, currentPage\r\n  -Users-container=> pass new(3) variables to User.js component\r\n  -Users.js => inside the render function before return => calculate how many pages you will need (users/amountUsersPerPage), use Math.ceil() to round the digit to a bigger integer \r\n  -Users.js => inside the render function before return => push all the pages to an array :pagesArray\r\n  -Users.js => inside return => map through the pagesArray and render a span with the page number for each page. also set the className to check if currentPage from state===page from map and set for that page special class to be able to recognize which page is current.\r\n  -Users.js => componentDidMount => change your request from hardcoded to responsive, using your variables: currentPage, pageSize.  for that remember to wrap whole request in the backtick `${variable} text ${variable}`\r\n  - So you have to change the currentPage in the state, clicking on a page number: set an action listener onClick to all <span>page</span> \r\nand make whole pipe line: (onClick=>function in the class=>props.method=>AC=>dispatch)  you have to send clicked page number through all the arguments all the way to state.\r\nimportant: onClick should call to a function in your class: (setCurrentPage), and then that function should call to props.setCurrentPage. you will understand this in the next step.\r\n  -  -Users.js =>setCurrentPage function => copy ajax request in to this function and change EndPoint ?page=${this.curre...} to ?page${page} to received page\r\nwhat you just clicked! \r\nwhy?   because method componentDidMount invokes ONLY ONCE!!! when function is born (there you make your first server request), but when you do some actions \r\non your page you need to rerender it, and for that you will be making request each time we press at another page number, and because this another page we have\r\nonly in received arguments as (page) and our currentPage is not accurate anymore (it is old, and we pressed new page now),  so we will pass the new page to request.\r\n  -users-reducer.js => change SET_USERS dispatch to reassign new users each time.\r\n  -Users.js=> setCurrentPage function => ajax server request=>  dispatch totalUserCount for state (make whole pipeline...), so each time you making \r\n  the request you check the  number of users from response and change your state value \"totalUsersCount\" through dispatch and rerender the page. \r\n\r\n\r\n\r\n\r\nLESSON #53\r\nimplemented first class component to Users.js file and component\r\n*/\r\n\r\n/*\r\nLESSON #51\r\ninstalled axios library: npm install axios --save\r\nimport axios in to users.jsx component\r\nmade first server request with axios.get().then()   at users.jsx component\r\nadd a folder with a picture and imported that picture to users.jsx\r\n*/\r\n\r\n/*lesson#47.1 we removed rerenderEntireTree subscriber function on state change, \r\nand we removed invoking the function rerenderEntireTree. so now we could remove actual function rerenderEntireTree\r\nand live only what was inside it, because only at the start this code will be rendering our app, we do not \r\nneed to call it again.\r\n */","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commonError\":\"Login_commonError__2fYc_\",\"loginForm\":\"Login_loginForm__3w69Q\",\"wrapper\":\"Login_wrapper__3UA6A\",\"rememberMe\":\"Login_rememberMe__1oDur\",\"buttonsWrapper\":\"Login_buttonsWrapper__JG4Js\",\"loginButton\":\"Login_loginButton__1OzTX\"};","import React from 'react'\r\nimport { Field } from 'redux-form'\r\nimport style from './FormControls.module.css'\r\n\r\n\r\n\r\nexport const Input = (props) => {\r\n    let { input, ...otherProps } = props\r\n    return (\r\n        <FormControl {...props}>  <input {...input} {...otherProps}></input>   </FormControl>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport const TextArea = (props) => {\r\n    let { input, ...otherProps } = props\r\n    return (\r\n        <FormControl {...props}>  <textarea {...input} {...otherProps}></textarea>   </FormControl>\r\n    )\r\n}\r\n\r\n\r\n\r\nconst FormControl = (props) => {\r\n\r\n    let {meta, children} = props\r\n    let error = meta.touched && meta.error\r\n    return (\r\n        <div className={`${style.formControle} ${error ? style.error : \"\"}`} >\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {error && <span> {meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport const createField = (placeholder, name, validators, component, props = {}, text = \"\") => {\r\n    return (\r\n        <div>\r\n            <Field placeholder={placeholder} component={component} validate={validators} name={name}   {...props}></Field>\r\n            {text}\r\n        </div>\r\n    )\r\n}","\r\nexport const required =(value)=>{\r\nif (value){return undefined}\r\nreturn \"this field is required\"\r\n}\r\n\r\n\r\nexport const maxChar =(max)=>{\r\n    return(\r\n        (value)=>{\r\n            if(value && value.length > max){return (\"maximum amount of characters is\" + max)}\r\n        }\r\n    )\r\n}","import { stopSubmit } from \"redux-form\";\r\nimport { profileAPI } from \"../api/api\";\r\nimport { reset } from 'redux-form';\r\n\r\nconst ADD_NEW_POST = \"ADD_NEW_POST\"\r\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\"\r\nconst SET_STATUS = \"SET_STATUS\"\r\nconst REMOVE_POST = \"REMOVE_POST\"\r\nconst SAVE_PHOTO_SUCCESS = \"SAVE_PHOTO_SUCCESS\"\r\nconst FETCHING_USER_PICTURE = \"FETCHING_USER_PICTURE\"\r\nconst SET_GLOBAL_ERROR = \"SET_GLOBAL_ERROR\"\r\n\r\n\r\ntype PostsDataType = {\r\n    id:number\r\n    likes:number|null\r\n    message:string|null\r\n}\r\n\r\nexport type PhotosType ={\r\n    small: null|string,\r\n    large: null|string\r\n  }\r\n  \r\n  export type ContactsType = {\r\n    facebook: string,\r\n      website: string,\r\n      vk: string,\r\n      twitter: string,\r\n      instagram: string,\r\n      youtube: string,\r\n      github:string,\r\n      mainLink:string\r\n  }\r\n\r\n\r\nexport type UserProfileType = {\r\n    lookingForAJob: boolean,\r\n      lookingForAJobDescription: string,\r\n      fullName:string,\r\n      userId: number,\r\n      contacts: ContactsType\r\n      photos:PhotosType\r\n    }\r\n\r\n    \r\n\r\n\r\nlet initialState = {\r\n    postsData: [\r\n        { id: 0, likes: 10, message: \"some message\" },\r\n        { id: 1, likes: 11, message: \"momolongmo\" },\r\n        { id: 2, likes: 12, message: \"some hurucasami\" },\r\n    ] as Array<PostsDataType>,\r\n\r\n\r\n    userProfile: null as UserProfileType|null,\r\n    status: \"\",\r\n    isFetching: false,\r\n    errorFlag: false,\r\n}\r\n\r\n\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n\r\nconst profileReducer = (state:InitialStateType = initialState, action:any):InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case ADD_NEW_POST:\r\n            return { ...state, postsData: [...state.postsData, { id: state.postsData.length, likes: 5, message: action.text }] };\r\n\r\n        case REMOVE_POST:\r\n            return {\r\n                ...state, postsData: state.postsData.filter(p => p.id !== action.id)\r\n            }\r\n\r\n        case SET_USER_PROFILE:\r\n            return { ...state, userProfile: action.userProfile }\r\n\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {\r\n                ...state,\r\n                userProfile: { ...state.userProfile, photos: action.photos } as UserProfileType\r\n            }\r\n\r\n        case FETCHING_USER_PICTURE:\r\n            return {\r\n                ...state,\r\n                isFetching: action.fetch\r\n            }\r\n\r\n        case SET_GLOBAL_ERROR:\r\n            return {\r\n                ...state,\r\n                errorFlag: !state.errorFlag\r\n            }\r\n\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\n\r\n\r\ntype addNewPostCreatorType = {\r\ntype : typeof ADD_NEW_POST\r\ntext:string\r\n}\r\n\r\n\r\nexport const addNewPostCreator = (text:string):addNewPostCreatorType => {\r\n    return {\r\n        type: ADD_NEW_POST,\r\n        text\r\n    }\r\n}\r\n\r\ntype removePostType = {\r\n    type : typeof REMOVE_POST\r\n    id:number\r\n    }\r\n\r\nexport const removePost = (id:number):removePostType => {\r\n    return {\r\n        type: REMOVE_POST,\r\n        id\r\n    }\r\n}\r\n\r\ntype SetUserProfileType = {\r\n    type : typeof SET_USER_PROFILE\r\n    userProfile: UserProfileType\r\n}\r\n\r\nexport const setUserProfile = (userProfile: UserProfileType):SetUserProfileType => {\r\n    return {\r\n        type: SET_USER_PROFILE,\r\n        userProfile\r\n    }\r\n}\r\n\r\n\r\n\r\ntype SetStatusType ={\r\n    type: typeof SET_STATUS\r\n status:string\r\n}\r\n\r\nexport const setStatus = (status:string):SetStatusType => {\r\n    return {\r\n        type: SET_STATUS,\r\n        status\r\n    }\r\n}\r\n\r\n\r\ntype SavePhotoSuccessType = {\r\n    type:typeof SAVE_PHOTO_SUCCESS\r\n    photos:PhotosType\r\n}\r\n\r\nexport const savePhotoSuccess = (photos:PhotosType):SavePhotoSuccessType => {\r\n    return {\r\n        type: SAVE_PHOTO_SUCCESS,\r\n        photos\r\n    }\r\n}\r\n\r\n\r\n\r\ntype IsFetchingACType = {\r\n    type : typeof FETCHING_USER_PICTURE\r\n    fetch:boolean\r\n}\r\n\r\nexport const isFetchingAC = (fetch:boolean):IsFetchingACType => {\r\n    return {\r\n        type: FETCHING_USER_PICTURE,\r\n        fetch\r\n    }\r\n}\r\n\r\n\r\n\r\ntype setGlobalErrorType ={\r\n    type : typeof SET_GLOBAL_ERROR\r\n}\r\n\r\nexport const setGlobalError = ():setGlobalErrorType => {\r\n    return {\r\n        type: SET_GLOBAL_ERROR\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* thunk */\r\n\r\nexport const addPostAndCleanReduxForm = (text:string) => {\r\n    return (dispatch:any) => {\r\n        dispatch(addNewPostCreator(text));\r\n        dispatch(reset(\"NewPost\"));\r\n\r\n    }\r\n}\r\n\r\n\r\nexport const showGlobalError = () => {\r\n    return (dispatch:any) => {\r\n        dispatch(setGlobalError());\r\n        setTimeout(() => {\r\n            dispatch(setGlobalError())\r\n        }, 3000)\r\n    }\r\n}\r\n\r\nexport const getUserProfile = (userId:number) => {\r\n    return (\r\n        (dispatch:any) => {\r\n            dispatch(isFetchingAC(true))\r\n            profileAPI.getUserProfile(userId).then((data) => {\r\n                dispatch(setUserProfile(data));\r\n                dispatch(isFetchingAC(false));\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\n\r\nexport const getStatus = (userId:number) => {\r\n    return (\r\n        (dispatch:any) => {\r\n            profileAPI.getStatus(userId).then((response) => {\r\n                dispatch(setStatus(response.data));\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\n\r\nexport const updateStatus = (status:string) => {\r\n    return (\r\n        async (dispatch:any) => {\r\n            try {\r\n                let response = await profileAPI.setStatus(status)\r\n                if (response.data.resultCode === 0) { dispatch(setStatus(status)) }\r\n            }\r\n\r\n            catch (error) { alert(error) }\r\n        }\r\n    )\r\n}\r\n\r\n\r\nexport const savePhoto = (file:any) => {\r\n    return (async (dispatch:any) => {\r\n        dispatch(isFetchingAC(true))\r\n        let response = await profileAPI.savePhoto(file);\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(isFetchingAC(false))\r\n            dispatch(savePhotoSuccess(response.data.data.photos))\r\n        }\r\n    }\r\n    )\r\n}\r\n\r\n\r\n\r\nexport const saveProfile = (profileData:UserProfileType) => {\r\n    return (async (dispatch:any, getState:any) => {\r\n        let userId = getState().auth.id                                  //! this is the way to get state from another reducer\r\n\r\n        let response = await profileAPI.saveProfile(profileData);\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(getUserProfile(userId))                                //! this is the way to call a thunk from a thunk in the same reducer\r\n        }\r\n        else {\r\n            dispatch(stopSubmit(\"profileDataA\", { _error: response.data.messages[0] }));\r\n            return (Promise.reject(response.data.messages[0]))\r\n        }\r\n    }\r\n    )\r\n}\r\n\r\n\r\nexport default profileReducer;","export default __webpack_public_path__ + \"static/media/loader.f53aa23f.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friend\":\"Friend_friend__Czo3p\",\"circle\":\"Friend_circle__6OWR1\",\"friends_name\":\"Friend_friends_name__3AmH7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2YcOo\",\"header__burger\":\"Header_header__burger__2VL0_\",\"header__burger_active\":\"Header_header__burger_active__36RL3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControle\":\"FormControls_formControle__1-oH2\",\"error\":\"FormControls_error__5Wo6Z\",\"commonError\":\"FormControls_commonError__DXeem\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Users_wrapper__2fQNR\",\"ussers_container\":\"Users_ussers_container__2rWcb\",\"usser_icon\":\"Users_usser_icon__2-8zS\",\"wrapper__for_AspectRatio\":\"Users_wrapper__for_AspectRatio__3og9b\",\"imgAspectRatio_wrapper\":\"Users_imgAspectRatio_wrapper__378m_\",\"img_wrapper\":\"Users_img_wrapper__QxNWj\",\"button_wrapper\":\"Users_button_wrapper__3Hg54\",\"user_info\":\"Users_user_info__2uDWn\",\"name_and_status\":\"Users_name_and_status__1DQgl\",\"country_and_city\":\"Users_country_and_city__34Xb3\",\"name\":\"Users_name___X1FW\",\"status\":\"Users_status__1Cf7r\",\"country\":\"Users_country__3vNC_\",\"city\":\"Users_city__8P_4B\",\"activePage\":\"Users_activePage__1_EKW\",\"pageNumbers\":\"Users_pageNumbers__3Z_rO\",\"buttonNext\":\"Users_buttonNext__2fDn5\",\"buttonPrev\":\"Users_buttonPrev__Rfqtg\",\"paginator\":\"Users_paginator__3sdg7\",\"searchIsFriend\":\"Users_searchIsFriend__3ZhJx\",\"searchTab\":\"Users_searchTab__3q9qH\",\"userSearchButton\":\"Users_userSearchButton__2pdg1\",\"searchDescription\":\"Users_searchDescription__1yeOP\"};"],"sourceRoot":""}